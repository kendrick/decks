{"version":3,"sources":["js/vendor/reveal/js/reveal.min.js"],"names":["root","factory","define","amd","Reveal","exports","module","this","initialize","options","initialized","checkCapabilities","features","transforms2d","transforms3d","dom","wrapper","document","querySelector","slides","window","addEventListener","layout","query","getQueryHash","extend","config","hideAddressBar","load","body","setAttribute","images","toArray","getElementsByTagName","iframes","lazyLoadable","concat","i","len","length","element","getAttribute","removeAttribute","isMobileDevice","test","UA","isChrome","testElement","createElement","style","requestAnimationFrameMethod","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","canvas","getContext","overviewTransitions","zoom","proceed","scriptsAsync","head","js","apply","start","scripts","scriptsToPreload","dependencies","s","condition","async","push","src","ready","match","callback","setupDOM","setupPostMessage","setupScrollPrevention","resetVerticalSlides","configure","readURL","updateBackground","setTimeout","classList","remove","loaded","add","dispatchEvent","indexh","indexv","currentSlide","isPrintingPDF","removeEventListeners","readyState","setupPDF","background","createSingletonNode","progress","progressbar","slideNumber","speakerNotes","controls","controlsLeft","querySelectorAll","controlsRight","controlsUp","controlsDown","controlsPrev","controlsNext","statusDiv","createStatusDiv","getElementById","position","height","width","overflow","clip","appendChild","getStatusText","node","text","nodeType","textContent","isAriaHidden","isDisplayHidden","getComputedStyle","childNodes","forEach","child","slideSize","getComputedSlideSize","innerWidth","innerHeight","pageWidth","Math","floor","margin","pageHeight","slideWidth","slideHeight","injectStyleSheet","layoutSlideContents","HORIZONTAL_SLIDES_SELECTOR","hslide","h","contains","vslide","v","SLIDES_SELECTOR","slide","left","top","contentHeight","scrollHeight","numberOfPages","max","ceil","min","pdfMaxPagesPerSlide","center","page","className","pdfPageHeightOffset","parentNode","insertBefore","slideBackgroundElement","showNotes","notes","getSlideNotes","notesLayout","notesElement","innerHTML","nextSibling","notesSpacing","bottom","showSlideNumber","slideNumberH","parseInt","slideNumberV","numberElement","formatSlideNumber","fragment","setInterval","scrollTop","scrollLeft","container","tagname","classname","nodes","testNode","createBackgrounds","slideh","backgroundStack","createBackground","slidev","parallaxBackgroundImage","backgroundImage","backgroundSize","parallaxBackgroundSize","data","backgroundVideo","backgroundIframe","backgroundColor","backgroundRepeat","backgroundPosition","backgroundTransition","replace","computedBackgroundStyle","rgb","colorToRgb","a","colorBrightness","postMessage","event","charAt","JSON","parse","method","args","numberOfSlides","transition","transitionSpeed","display","shuffle","rtl","pause","resume","mouseWheel","onDocumentMouseScroll","removeEventListener","rollingLinks","enableRollingLinks","disableRollingLinks","previewLinks","enablePreviewLinks","disablePreviewLinks","autoSlidePlayer","destroy","autoSlide","autoSlideStoppable","Playback","Date","now","autoSlideStartTime","on","onAutoSlidePlayerClick","autoSlidePaused","fragments","slideNumberDisplay","isSpeakerNotes","sync","addEventListeners","eventsAreBound","onWindowHashChange","onWindowResize","touch","onTouchStart","onTouchMove","onTouchEnd","navigator","pointerEnabled","onPointerDown","onPointerMove","onPointerUp","msPointerEnabled","keyboard","onDocumentKeyDown","onDocumentKeyPress","onProgressClicked","focusBodyOnPageVisibilityChange","visibilityChange","onPageVisibilityChange","pointerEvents","eventName","el","onNavigateLeftClicked","onNavigateRightClicked","onNavigateUpClicked","onNavigateDownClicked","onNavigatePrevClicked","onNavigateNextClicked","b","o","Array","prototype","slice","call","deserialize","value","parseFloat","distanceBetween","dx","x","dy","y","sqrt","transformElement","transform","WebkitTransform","MozTransform","msTransform","transformSlides","transforms","slidesTransform","overview","tag","type","styleSheet","cssText","createTextNode","closestParent","target","selector","parent","matchesMethod","matches","matchesSelector","msMatchesSelector","color","hex3","r","g","hex6","substr","rgba","getRemainingHeight","newHeight","oldHeight","offsetHeight","location","search","removeAddressBar","scrollTo","createEvent","initEvent","postMessageEvents","self","stringify","namespace","state","getState","anchors","anchor","span","onPreviewLinkClicked","showPreview","url","closeOverlay","overlay","join","preventDefault","toggleHelp","override","showHelp","help","html","key","keyboardShortcuts","removeChild","size","scale","presentationWidth","presentationHeight","minScale","maxScale","right","updateProgress","updateParallax","isOverview","updateOverview","remainingHeight","nodeName","nw","naturalWidth","videoWidth","nh","naturalHeight","videoHeight","es","offsetWidth","setPreviousVerticalIndex","stack","getPreviousVerticalIndex","attributeName","hasAttribute","activateOverview","cancelAutoSlide","onOverviewSlideClicked","overviewSlideWidth","overviewSlideHeight","updateSlidesVisibility","layoutOverview","hbackground","vbackground","vmin","deactivateOverview","cueAutoSlide","toggleOverview","isVerticalSlide","enterFullscreen","documentElement","requestMethod","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","wasPaused","togglePause","isPaused","toggleAutoSlide","resumeAutoSlide","pauseAutoSlide","isAutoSliding","f","previousSlide","horizontalSlides","undefined","stateBefore","indexhBefore","indexvBefore","updateSlides","VERTICAL_SLIDES_SELECTOR","stateLoop","j","splice","pop","currentHorizontalSlide","currentVerticalSlides","navigateFragment","slideChanged","origin","HOME_SLIDE_SELECTOR","stopEmbeddedContent","startEmbeddedContent","updateControls","updateSlideNumber","updateNotes","writeURL","sortAllFragments","formatEmbeddedContent","autoPlayMedia","horizontalSlide","verticalSlide","verticalSlides","sortFragments","random","index","slidesLength","printMode","loop","reverse","pastFragments","pastFragment","futureFragments","futureFragment","slideState","split","distanceX","distanceY","horizontalSlidesLength","viewDistance","Number","MAX_VALUE","verticalSlidesLength","abs","showSlide","hideSlide","oy","getProgress","format","getSlidePastCount","getTotalSlides","delimiter","isNaN","routes","availableRoutes","availableFragments","up","down","prev","next","includeAll","currentBackground","horizontalPast","horizontalFuture","backgroundh","backgroundv","previousBackground","backgroundImageURL","opacity","previousBackgroundHash","currentBackgroundHash","classToBubble","backgroundWidth","backgroundHeight","horizontalOffsetMultiplier","horizontalOffset","horizontalSlideCount","parallaxBackgroundHorizontal","verticalOffsetMultiplier","verticalOffset","verticalSlideCount","parallaxBackgroundVertical","media","sources","source","indices","getIndices","getSlideBackground","backgroundVideoLoop","backgroundVideoMuted","video","muted","autoplay","iframe","maxHeight","maxWidth","hiddenFragments","_appendParamToIframeSource","sourceAttribute","sourceURL","param","indexOf","play","startEmbeddedMedia","startEmbeddedIframe","isAttachedToDOM","isVisible","currentTime","contentWindow","pastCount","mainLoop","totalCount","allFragments","hash","bits","name","delay","history","clearTimeout","writeURLTimeout","id","isVertical","currentFragment","getSlides","getSlide","horizontalBackground","verticalBackgrounds","indexf","paused","setState","pausedFlag","overviewFlag","ordered","unordered","sorted","group","offset","lastVisibleFragment","fragmentsShown","fragmentsHidden","nextFragment","previousFragment","fragmentAutoSlide","parentAutoSlide","slideAutoSlide","duration","playbackRate","isLastSlide","autoSlideTimeout","autoSlideMethod","navigateNext","setPlaying","navigateLeft","navigateRight","navigateUp","navigateDown","navigatePrev","isSwipePrevented","onUserInput","shiftKey","charCode","keyboardCondition","autoSlideWasPaused","activeElementIsCE","activeElement","contentEditable","activeElementIsInput","tagName","activeElementIsNotes","keyCode","altKey","ctrlKey","metaKey","resumeKeyCodes","triggered","startX","touches","clientX","startY","clientY","startCount","startSpan","captured","currentX","currentY","currentSpan","threshold","deltaX","deltaY","embedded","pointerType","MSPOINTER_TYPE_TOUCH","lastMouseWheelStep","delta","detail","wheelDelta","slidesTotal","slideIndex","webkitHidden","msHidden","hidden","blur","focus","currentTarget","progressCheck","diameter","diameter2","thickness","playing","progressOffset","context","render","userAgent","POSITIVE_INFINITY","N  ,  SPACE","P","&#8592;  ,  H","&#8594;  ,  L","&#8593;  ,  K","&#8595;  ,  J","Home","End","B  ,  .","F","ESC, O","wasPlaying","animate","progressBefore","bind","radius","endAngle","PI","startAngle","save","clearRect","beginPath","arc","fillStyle","fill","lineWidth","strokeStyle","stroke","translate","fillRect","iconSize","moveTo","lineTo","restore","listener","off","VERSION","prevFragment","navigateTo","getPreviousSlide","getCurrentSlide","getScale","getConfig","shift","unescape","isFirstSlide","nextElementSibling","isReady","useCapture","triggerKey","registerKeyboardShortcut"],"mappings":"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","file":"reveal.min.js","sourcesContent":["/*!\n * reveal.js\n * http://lab.hakim.se/reveal-js\n * MIT licensed\n *\n * Copyright (C) 2017 Hakim El Hattab, http://hakim.se\n */\n(function( root, factory ) {\n\tif( typeof define === 'function' && define.amd ) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( function() {\n\t\t\troot.Reveal = factory();\n\t\t\treturn root.Reveal;\n\t\t} );\n\t} else if( typeof exports === 'object' ) {\n\t\t// Node. Does not work with strict CommonJS.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals.\n\t\troot.Reveal = factory();\n\t}\n}( this, function() {\n\n\t'use strict';\n\n\tvar Reveal;\n\n\t// The reveal.js version\n\tvar VERSION = '3.5.0';\n\n\tvar SLIDES_SELECTOR = '.slides section',\n\t\tHORIZONTAL_SLIDES_SELECTOR = '.slides>section',\n\t\tVERTICAL_SLIDES_SELECTOR = '.slides>section.present>section',\n\t\tHOME_SLIDE_SELECTOR = '.slides>section:first-of-type',\n\t\tUA = navigator.userAgent,\n\n\t\t// Configuration defaults, can be overridden at initialization time\n\t\tconfig = {\n\n\t\t\t// The \"normal\" size of the presentation, aspect ratio will be preserved\n\t\t\t// when the presentation is scaled to fit different resolutions\n\t\t\twidth: 960,\n\t\t\theight: 700,\n\n\t\t\t// Factor of the display size that should remain empty around the content\n\t\t\tmargin: 0.04,\n\n\t\t\t// Bounds for smallest/largest possible scale to apply to content\n\t\t\tminScale: 0.2,\n\t\t\tmaxScale: 2.0,\n\n\t\t\t// Display controls in the bottom right corner\n\t\t\tcontrols: true,\n\n\t\t\t// Display a presentation progress bar\n\t\t\tprogress: true,\n\n\t\t\t// Display the page number of the current slide\n\t\t\tslideNumber: false,\n\n\t\t\t// Determine which displays to show the slide number on\n\t\t\tshowSlideNumber: 'all',\n\n\t\t\t// Push each slide change to the browser history\n\t\t\thistory: false,\n\n\t\t\t// Enable keyboard shortcuts for navigation\n\t\t\tkeyboard: true,\n\n\t\t\t// Optional function that blocks keyboard events when retuning false\n\t\t\tkeyboardCondition: null,\n\n\t\t\t// Enable the slide overview mode\n\t\t\toverview: true,\n\n\t\t\t// Vertical centering of slides\n\t\t\tcenter: true,\n\n\t\t\t// Enables touch navigation on devices with touch input\n\t\t\ttouch: true,\n\n\t\t\t// Loop the presentation\n\t\t\tloop: false,\n\n\t\t\t// Change the presentation direction to be RTL\n\t\t\trtl: false,\n\n\t\t\t// Randomizes the order of slides each time the presentation loads\n\t\t\tshuffle: false,\n\n\t\t\t// Turns fragments on and off globally\n\t\t\tfragments: true,\n\n\t\t\t// Flags if the presentation is running in an embedded mode,\n\t\t\t// i.e. contained within a limited portion of the screen\n\t\t\tembedded: false,\n\n\t\t\t// Flags if we should show a help overlay when the question-mark\n\t\t\t// key is pressed\n\t\t\thelp: true,\n\n\t\t\t// Flags if it should be possible to pause the presentation (blackout)\n\t\t\tpause: true,\n\n\t\t\t// Flags if speaker notes should be visible to all viewers\n\t\t\tshowNotes: false,\n\n\t\t\t// Global override for autolaying embedded media (video/audio/iframe)\n\t\t\t// - null: Media will only autoplay if data-autoplay is present\n\t\t\t// - true: All media will autoplay, regardless of individual setting\n\t\t\t// - false: No media will autoplay, regardless of individual setting\n\t\t\tautoPlayMedia: null,\n\n\t\t\t// Number of milliseconds between automatically proceeding to the\n\t\t\t// next slide, disabled when set to 0, this value can be overwritten\n\t\t\t// by using a data-autoslide attribute on your slides\n\t\t\tautoSlide: 0,\n\n\t\t\t// Stop auto-sliding after user input\n\t\t\tautoSlideStoppable: true,\n\n\t\t\t// Use this method for navigation when auto-sliding (defaults to navigateNext)\n\t\t\tautoSlideMethod: null,\n\n\t\t\t// Enable slide navigation via mouse wheel\n\t\t\tmouseWheel: false,\n\n\t\t\t// Apply a 3D roll to links on hover\n\t\t\trollingLinks: false,\n\n\t\t\t// Hides the address bar on mobile devices\n\t\t\thideAddressBar: true,\n\n\t\t\t// Opens links in an iframe preview overlay\n\t\t\tpreviewLinks: false,\n\n\t\t\t// Exposes the reveal.js API through window.postMessage\n\t\t\tpostMessage: true,\n\n\t\t\t// Dispatches all reveal.js events to the parent window through postMessage\n\t\t\tpostMessageEvents: false,\n\n\t\t\t// Focuses body when page changes visibility to ensure keyboard shortcuts work\n\t\t\tfocusBodyOnPageVisibilityChange: true,\n\n\t\t\t// Transition style\n\t\t\ttransition: 'slide', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Transition speed\n\t\t\ttransitionSpeed: 'default', // default/fast/slow\n\n\t\t\t// Transition style for full page slide backgrounds\n\t\t\tbackgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Parallax background image\n\t\t\tparallaxBackgroundImage: '', // CSS syntax, e.g. \"a.jpg\"\n\n\t\t\t// Parallax background size\n\t\t\tparallaxBackgroundSize: '', // CSS syntax, e.g. \"3000px 2000px\"\n\n\t\t\t// Amount of pixels to move the parallax background per slide step\n\t\t\tparallaxBackgroundHorizontal: null,\n\t\t\tparallaxBackgroundVertical: null,\n\n\t\t\t// The maximum number of pages a single slide can expand onto when printing\n\t\t\t// to PDF, unlimited by default\n\t\t\tpdfMaxPagesPerSlide: Number.POSITIVE_INFINITY,\n\n\t\t\t// Offset used to reduce the height of content within exported PDF pages.\n\t\t\t// This exists to account for environment differences based on how you\n\t\t\t// print to PDF. CLI printing options, like phantomjs and wkpdf, can end\n\t\t\t// on precisely the total height of the document whereas in-browser\n\t\t\t// printing has to end one pixel before.\n\t\t\tpdfPageHeightOffset: -1,\n\n\t\t\t// Number of slides away from the current that are visible\n\t\t\tviewDistance: 3,\n\n\t\t\t// The display mode that will be used to show slides\n\t\t\tdisplay: 'block',\n\n\t\t\t// Script dependencies to load\n\t\t\tdependencies: []\n\n\t\t},\n\n\t\t// Flags if Reveal.initialize() has been called\n\t\tinitialized = false,\n\n\t\t// Flags if reveal.js is loaded (has dispatched the 'ready' event)\n\t\tloaded = false,\n\n\t\t// Flags if the overview mode is currently active\n\t\toverview = false,\n\n\t\t// Holds the dimensions of our overview slides, including margins\n\t\toverviewSlideWidth = null,\n\t\toverviewSlideHeight = null,\n\n\t\t// The horizontal and vertical index of the currently active slide\n\t\tindexh,\n\t\tindexv,\n\n\t\t// The previous and current slide HTML elements\n\t\tpreviousSlide,\n\t\tcurrentSlide,\n\n\t\tpreviousBackground,\n\n\t\t// Slides may hold a data-state attribute which we pick up and apply\n\t\t// as a class to the body. This list contains the combined state of\n\t\t// all current slides.\n\t\tstate = [],\n\n\t\t// The current scale of the presentation (see width/height config)\n\t\tscale = 1,\n\n\t\t// CSS transform that is currently applied to the slides container,\n\t\t// split into two groups\n\t\tslidesTransform = { layout: '', overview: '' },\n\n\t\t// Cached references to DOM elements\n\t\tdom = {},\n\n\t\t// Features supported by the browser, see #checkCapabilities()\n\t\tfeatures = {},\n\n\t\t// Client is a mobile device, see #checkCapabilities()\n\t\tisMobileDevice,\n\n\t\t// Client is a desktop Chrome, see #checkCapabilities()\n\t\tisChrome,\n\n\t\t// Throttles mouse wheel navigation\n\t\tlastMouseWheelStep = 0,\n\n\t\t// Delays updates to the URL due to a Chrome thumbnailer bug\n\t\twriteURLTimeout = 0,\n\n\t\t// Flags if the interaction event listeners are bound\n\t\teventsAreBound = false,\n\n\t\t// The current auto-slide duration\n\t\tautoSlide = 0,\n\n\t\t// Auto slide properties\n\t\tautoSlidePlayer,\n\t\tautoSlideTimeout = 0,\n\t\tautoSlideStartTime = -1,\n\t\tautoSlidePaused = false,\n\n\t\t// Holds information about the currently ongoing touch input\n\t\ttouch = {\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tstartSpan: 0,\n\t\t\tstartCount: 0,\n\t\t\tcaptured: false,\n\t\t\tthreshold: 40\n\t\t},\n\n\t\t// Holds information about the keyboard shortcuts\n\t\tkeyboardShortcuts = {\n\t\t\t'N  ,  SPACE':\t\t\t'Next slide',\n\t\t\t'P':\t\t\t\t\t'Previous slide',\n\t\t\t'&#8592;  ,  H':\t\t'Navigate left',\n\t\t\t'&#8594;  ,  L':\t\t'Navigate right',\n\t\t\t'&#8593;  ,  K':\t\t'Navigate up',\n\t\t\t'&#8595;  ,  J':\t\t'Navigate down',\n\t\t\t'Home':\t\t\t\t\t'First slide',\n\t\t\t'End':\t\t\t\t\t'Last slide',\n\t\t\t'B  ,  .':\t\t\t\t'Pause',\n\t\t\t'F':\t\t\t\t\t'Fullscreen',\n\t\t\t'ESC, O':\t\t\t\t'Slide overview'\n\t\t};\n\n\t/**\n\t * Starts up the presentation if the client is capable.\n\t */\n\tfunction initialize( options ) {\n\n\t\t// Make sure we only initialize once\n\t\tif( initialized === true ) return;\n\n\t\tinitialized = true;\n\n\t\tcheckCapabilities();\n\n\t\tif( !features.transforms2d && !features.transforms3d ) {\n\t\t\tdocument.body.setAttribute( 'class', 'no-transforms' );\n\n\t\t\t// Since JS won't be running any further, we load all lazy\n\t\t\t// loading elements upfront\n\t\t\tvar images = toArray( document.getElementsByTagName( 'img' ) ),\n\t\t\t\tiframes = toArray( document.getElementsByTagName( 'iframe' ) );\n\n\t\t\tvar lazyLoadable = images.concat( iframes );\n\n\t\t\tfor( var i = 0, len = lazyLoadable.length; i < len; i++ ) {\n\t\t\t\tvar element = lazyLoadable[i];\n\t\t\t\tif( element.getAttribute( 'data-src' ) ) {\n\t\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\t\t\telement.removeAttribute( 'data-src' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the browser doesn't support core features we won't be\n\t\t\t// using JavaScript to control the presentation\n\t\t\treturn;\n\t\t}\n\n\t\t// Cache references to key DOM elements\n\t\tdom.wrapper = document.querySelector( '.reveal' );\n\t\tdom.slides = document.querySelector( '.reveal .slides' );\n\n\t\t// Force a layout when the whole page, incl fonts, has loaded\n\t\twindow.addEventListener( 'load', layout, false );\n\n\t\tvar query = Reveal.getQueryHash();\n\n\t\t// Do not accept new dependencies via query config to avoid\n\t\t// the potential of malicious script injection\n\t\tif( typeof query['dependencies'] !== 'undefined' ) delete query['dependencies'];\n\n\t\t// Copy options over to our config object\n\t\textend( config, options );\n\t\textend( config, query );\n\n\t\t// Hide the address bar in mobile browsers\n\t\thideAddressBar();\n\n\t\t// Loads the dependencies and continues to #start() once done\n\t\tload();\n\n\t}\n\n\t/**\n\t * Inspect the client to see what it's capable of, this\n\t * should only happens once per runtime.\n\t */\n\tfunction checkCapabilities() {\n\n\t\tisMobileDevice = /(iphone|ipod|ipad|android)/gi.test( UA );\n\t\tisChrome = /chrome/i.test( UA ) && !/edge/i.test( UA );\n\n\t\tvar testElement = document.createElement( 'div' );\n\n\t\tfeatures.transforms3d = 'WebkitPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'MozPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'msPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'OPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'perspective' in testElement.style;\n\n\t\tfeatures.transforms2d = 'WebkitTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'MozTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'msTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'OTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'transform' in testElement.style;\n\n\t\tfeatures.requestAnimationFrameMethod = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\t\tfeatures.requestAnimationFrame = typeof features.requestAnimationFrameMethod === 'function';\n\n\t\tfeatures.canvas = !!document.createElement( 'canvas' ).getContext;\n\n\t\t// Transitions in the overview are disabled in desktop and\n\t\t// Safari due to lag\n\t\tfeatures.overviewTransitions = !/Version\\/[\\d\\.]+.*Safari/.test( UA );\n\n\t\t// Flags if we should use zoom instead of transform to scale\n\t\t// up slides. Zoom produces crisper results but has a lot of\n\t\t// xbrowser quirks so we only use it in whitelsited browsers.\n\t\tfeatures.zoom = 'zoom' in testElement.style && !isMobileDevice &&\n\t\t\t\t\t\t( isChrome || /Version\\/[\\d\\.]+.*Safari/.test( UA ) );\n\n\t}\n\n    /**\n     * Loads the dependencies of reveal.js. Dependencies are\n     * defined via the configuration option 'dependencies'\n     * and will be loaded prior to starting/binding reveal.js.\n     * Some dependencies may have an 'async' flag, if so they\n     * will load after reveal.js has been started up.\n     */\n\tfunction load() {\n\n\t\tvar scripts = [],\n\t\t\tscriptsAsync = [],\n\t\t\tscriptsToPreload = 0;\n\n\t\t// Called once synchronous scripts finish loading\n\t\tfunction proceed() {\n\t\t\tif( scriptsAsync.length ) {\n\t\t\t\t// Load asynchronous scripts\n\t\t\t\thead.js.apply( null, scriptsAsync );\n\t\t\t}\n\n\t\t\tstart();\n\t\t}\n\n\t\tfunction loadScript( s ) {\n\t\t\thead.ready( s.src.match( /([\\w\\d_\\-]*)\\.?js$|[^\\\\\\/]*$/i )[0], function() {\n\t\t\t\t// Extension may contain callback functions\n\t\t\t\tif( typeof s.callback === 'function' ) {\n\t\t\t\t\ts.callback.apply( this );\n\t\t\t\t}\n\n\t\t\t\tif( --scriptsToPreload === 0 ) {\n\t\t\t\t\tproceed();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfor( var i = 0, len = config.dependencies.length; i < len; i++ ) {\n\t\t\tvar s = config.dependencies[i];\n\n\t\t\t// Load if there's no condition or the condition is truthy\n\t\t\tif( !s.condition || s.condition() ) {\n\t\t\t\tif( s.async ) {\n\t\t\t\t\tscriptsAsync.push( s.src );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tscripts.push( s.src );\n\t\t\t\t}\n\n\t\t\t\tloadScript( s );\n\t\t\t}\n\t\t}\n\n\t\tif( scripts.length ) {\n\t\t\tscriptsToPreload = scripts.length;\n\n\t\t\t// Load synchronous scripts\n\t\t\thead.js.apply( null, scripts );\n\t\t}\n\t\telse {\n\t\t\tproceed();\n\t\t}\n\n\t}\n\n\t/**\n\t * Starts up reveal.js by binding input events and navigating\n\t * to the current URL deeplink if there is one.\n\t */\n\tfunction start() {\n\n\t\t// Make sure we've got all the DOM elements we need\n\t\tsetupDOM();\n\n\t\t// Listen to messages posted to this window\n\t\tsetupPostMessage();\n\n\t\t// Prevent the slides from being scrolled out of view\n\t\tsetupScrollPrevention();\n\n\t\t// Resets all vertical slides so that only the first is visible\n\t\tresetVerticalSlides();\n\n\t\t// Updates the presentation to match the current configuration values\n\t\tconfigure();\n\n\t\t// Read the initial hash\n\t\treadURL();\n\n\t\t// Update all backgrounds\n\t\tupdateBackground( true );\n\n\t\t// Notify listeners that the presentation is ready but use a 1ms\n\t\t// timeout to ensure it's not fired synchronously after #initialize()\n\t\tsetTimeout( function() {\n\t\t\t// Enable transitions now that we're loaded\n\t\t\tdom.slides.classList.remove( 'no-transition' );\n\n\t\t\tloaded = true;\n\n\t\t\tdom.wrapper.classList.add( 'ready' );\n\n\t\t\tdispatchEvent( 'ready', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\t\t}, 1 );\n\n\t\t// Special setup and config is required when printing to PDF\n\t\tif( isPrintingPDF() ) {\n\t\t\tremoveEventListeners();\n\n\t\t\t// The document needs to have loaded for the PDF layout\n\t\t\t// measurements to be accurate\n\t\t\tif( document.readyState === 'complete' ) {\n\t\t\t\tsetupPDF();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.addEventListener( 'load', setupPDF );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Finds and stores references to DOM elements which are\n\t * required by the presentation. If a required element is\n\t * not found, it is created.\n\t */\n\tfunction setupDOM() {\n\n\t\t// Prevent transitions while we're loading\n\t\tdom.slides.classList.add( 'no-transition' );\n\n\t\t// Background element\n\t\tdom.background = createSingletonNode( dom.wrapper, 'div', 'backgrounds', null );\n\n\t\t// Progress bar\n\t\tdom.progress = createSingletonNode( dom.wrapper, 'div', 'progress', '<span></span>' );\n\t\tdom.progressbar = dom.progress.querySelector( 'span' );\n\n\t\t// Arrow controls\n\t\tcreateSingletonNode( dom.wrapper, 'aside', 'controls',\n\t\t\t'<button class=\"navigate-left\" aria-label=\"previous slide\"></button>' +\n\t\t\t'<button class=\"navigate-right\" aria-label=\"next slide\"></button>' +\n\t\t\t'<button class=\"navigate-up\" aria-label=\"above slide\"></button>' +\n\t\t\t'<button class=\"navigate-down\" aria-label=\"below slide\"></button>' );\n\n\t\t// Slide number\n\t\tdom.slideNumber = createSingletonNode( dom.wrapper, 'div', 'slide-number', '' );\n\n\t\t// Element containing notes that are visible to the audience\n\t\tdom.speakerNotes = createSingletonNode( dom.wrapper, 'div', 'speaker-notes', null );\n\t\tdom.speakerNotes.setAttribute( 'data-prevent-swipe', '' );\n\t\tdom.speakerNotes.setAttribute( 'tabindex', '0' );\n\n\t\t// Overlay graphic which is displayed during the paused mode\n\t\tcreateSingletonNode( dom.wrapper, 'div', 'pause-overlay', null );\n\n\t\t// Cache references to elements\n\t\tdom.controls = document.querySelector( '.reveal .controls' );\n\n\t\tdom.wrapper.setAttribute( 'role', 'application' );\n\n\t\t// There can be multiple instances of controls throughout the page\n\t\tdom.controlsLeft = toArray( document.querySelectorAll( '.navigate-left' ) );\n\t\tdom.controlsRight = toArray( document.querySelectorAll( '.navigate-right' ) );\n\t\tdom.controlsUp = toArray( document.querySelectorAll( '.navigate-up' ) );\n\t\tdom.controlsDown = toArray( document.querySelectorAll( '.navigate-down' ) );\n\t\tdom.controlsPrev = toArray( document.querySelectorAll( '.navigate-prev' ) );\n\t\tdom.controlsNext = toArray( document.querySelectorAll( '.navigate-next' ) );\n\n\t\tdom.statusDiv = createStatusDiv();\n\t}\n\n\t/**\n\t * Creates a hidden div with role aria-live to announce the\n\t * current slide content. Hide the div off-screen to make it\n\t * available only to Assistive Technologies.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createStatusDiv() {\n\n\t\tvar statusDiv = document.getElementById( 'aria-status-div' );\n\t\tif( !statusDiv ) {\n\t\t\tstatusDiv = document.createElement( 'div' );\n\t\t\tstatusDiv.style.position = 'absolute';\n\t\t\tstatusDiv.style.height = '1px';\n\t\t\tstatusDiv.style.width = '1px';\n\t\t\tstatusDiv.style.overflow = 'hidden';\n\t\t\tstatusDiv.style.clip = 'rect( 1px, 1px, 1px, 1px )';\n\t\t\tstatusDiv.setAttribute( 'id', 'aria-status-div' );\n\t\t\tstatusDiv.setAttribute( 'aria-live', 'polite' );\n\t\t\tstatusDiv.setAttribute( 'aria-atomic','true' );\n\t\t\tdom.wrapper.appendChild( statusDiv );\n\t\t}\n\t\treturn statusDiv;\n\n\t}\n\n\t/**\n\t * Converts the given HTML element into a string of text\n\t * that can be announced to a screen reader. Hidden\n\t * elements are excluded.\n\t */\n\tfunction getStatusText( node ) {\n\n\t\tvar text = '';\n\n\t\t// Text node\n\t\tif( node.nodeType === 3 ) {\n\t\t\ttext += node.textContent;\n\t\t}\n\t\t// Element node\n\t\telse if( node.nodeType === 1 ) {\n\n\t\t\tvar isAriaHidden = node.getAttribute( 'aria-hidden' );\n\t\t\tvar isDisplayHidden = window.getComputedStyle( node )['display'] === 'none';\n\t\t\tif( isAriaHidden !== 'true' && !isDisplayHidden ) {\n\n\t\t\t\ttoArray( node.childNodes ).forEach( function( child ) {\n\t\t\t\t\ttext += getStatusText( child );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn text;\n\n\t}\n\n\t/**\n\t * Configures the presentation for printing to a static\n\t * PDF.\n\t */\n\tfunction setupPDF() {\n\n\t\tvar slideSize = getComputedSlideSize( window.innerWidth, window.innerHeight );\n\n\t\t// Dimensions of the PDF pages\n\t\tvar pageWidth = Math.floor( slideSize.width * ( 1 + config.margin ) ),\n\t\t\tpageHeight = Math.floor( slideSize.height * ( 1 + config.margin ) );\n\n\t\t// Dimensions of slides within the pages\n\t\tvar slideWidth = slideSize.width,\n\t\t\tslideHeight = slideSize.height;\n\n\t\t// Let the browser know what page size we want to print\n\t\tinjectStyleSheet( '@page{size:'+ pageWidth +'px '+ pageHeight +'px; margin: 0px;}' );\n\n\t\t// Limit the size of certain elements to the dimensions of the slide\n\t\tinjectStyleSheet( '.reveal section>img, .reveal section>video, .reveal section>iframe{max-width: '+ slideWidth +'px; max-height:'+ slideHeight +'px}' );\n\n\t\tdocument.body.classList.add( 'print-pdf' );\n\t\tdocument.body.style.width = pageWidth + 'px';\n\t\tdocument.body.style.height = pageHeight + 'px';\n\n\t\t// Make sure stretch elements fit on slide\n\t\tlayoutSlideContents( slideWidth, slideHeight );\n\n\t\t// Add each slide's index as attributes on itself, we need these\n\t\t// indices to generate slide numbers below\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( hslide, h ) {\n\t\t\thslide.setAttribute( 'data-index-h', h );\n\n\t\t\tif( hslide.classList.contains( 'stack' ) ) {\n\t\t\t\ttoArray( hslide.querySelectorAll( 'section' ) ).forEach( function( vslide, v ) {\n\t\t\t\t\tvslide.setAttribute( 'data-index-h', h );\n\t\t\t\t\tvslide.setAttribute( 'data-index-v', v );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Slide and slide background layout\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\n\t\t\t// Vertical stacks are not centred since their section\n\t\t\t// children will be\n\t\t\tif( slide.classList.contains( 'stack' ) === false ) {\n\t\t\t\t// Center the slide inside of the page, giving the slide some margin\n\t\t\t\tvar left = ( pageWidth - slideWidth ) / 2,\n\t\t\t\t\ttop = ( pageHeight - slideHeight ) / 2;\n\n\t\t\t\tvar contentHeight = slide.scrollHeight;\n\t\t\t\tvar numberOfPages = Math.max( Math.ceil( contentHeight / pageHeight ), 1 );\n\n\t\t\t\t// Adhere to configured pages per slide limit\n\t\t\t\tnumberOfPages = Math.min( numberOfPages, config.pdfMaxPagesPerSlide );\n\n\t\t\t\t// Center slides vertically\n\t\t\t\tif( numberOfPages === 1 && config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\ttop = Math.max( ( pageHeight - contentHeight ) / 2, 0 );\n\t\t\t\t}\n\n\t\t\t\t// Wrap the slide in a page element and hide its overflow\n\t\t\t\t// so that no page ever flows onto another\n\t\t\t\tvar page = document.createElement( 'div' );\n\t\t\t\tpage.className = 'pdf-page';\n\t\t\t\tpage.style.height = ( ( pageHeight + config.pdfPageHeightOffset ) * numberOfPages ) + 'px';\n\t\t\t\tslide.parentNode.insertBefore( page, slide );\n\t\t\t\tpage.appendChild( slide );\n\n\t\t\t\t// Position the slide inside of the page\n\t\t\t\tslide.style.left = left + 'px';\n\t\t\t\tslide.style.top = top + 'px';\n\t\t\t\tslide.style.width = slideWidth + 'px';\n\n\t\t\t\tif( slide.slideBackgroundElement ) {\n\t\t\t\t\tpage.insertBefore( slide.slideBackgroundElement, slide );\n\t\t\t\t}\n\n\t\t\t\t// Inject notes if `showNotes` is enabled\n\t\t\t\tif( config.showNotes ) {\n\n\t\t\t\t\t// Are there notes for this slide?\n\t\t\t\t\tvar notes = getSlideNotes( slide );\n\t\t\t\t\tif( notes ) {\n\n\t\t\t\t\t\tvar notesSpacing = 8;\n\t\t\t\t\t\tvar notesLayout = typeof config.showNotes === 'string' ? config.showNotes : 'inline';\n\t\t\t\t\t\tvar notesElement = document.createElement( 'div' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes-pdf' );\n\t\t\t\t\t\tnotesElement.setAttribute( 'data-layout', notesLayout );\n\t\t\t\t\t\tnotesElement.innerHTML = notes;\n\n\t\t\t\t\t\tif( notesLayout === 'separate-page' ) {\n\t\t\t\t\t\t\tpage.parentNode.insertBefore( notesElement, page.nextSibling );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnotesElement.style.left = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.bottom = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.width = ( pageWidth - notesSpacing*2 ) + 'px';\n\t\t\t\t\t\t\tpage.appendChild( notesElement );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Inject slide numbers if `slideNumbers` are enabled\n\t\t\t\tif( config.slideNumber && /all|print/i.test( config.showSlideNumber ) ) {\n\t\t\t\t\tvar slideNumberH = parseInt( slide.getAttribute( 'data-index-h' ), 10 ) + 1,\n\t\t\t\t\t\tslideNumberV = parseInt( slide.getAttribute( 'data-index-v' ), 10 ) + 1;\n\n\t\t\t\t\tvar numberElement = document.createElement( 'div' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number-pdf' );\n\t\t\t\t\tnumberElement.innerHTML = formatSlideNumber( slideNumberH, '.', slideNumberV );\n\t\t\t\t\tpage.appendChild( numberElement );\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\t// Show all fragments\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' .fragment' ) ).forEach( function( fragment ) {\n\t\t\tfragment.classList.add( 'visible' );\n\t\t} );\n\n\t\t// Notify subscribers that the PDF layout is good to go\n\t\tdispatchEvent( 'pdf-ready' );\n\n\t}\n\n\t/**\n\t * This is an unfortunate necessity. Some actions – such as\n\t * an input field being focused in an iframe or using the\n\t * keyboard to expand text selection beyond the bounds of\n\t * a slide – can trigger our content to be pushed out of view.\n\t * This scrolling can not be prevented by hiding overflow in\n\t * CSS (we already do) so we have to resort to repeatedly\n\t * checking if the slides have been offset :(\n\t */\n\tfunction setupScrollPrevention() {\n\n\t\tsetInterval( function() {\n\t\t\tif( dom.wrapper.scrollTop !== 0 || dom.wrapper.scrollLeft !== 0 ) {\n\t\t\t\tdom.wrapper.scrollTop = 0;\n\t\t\t\tdom.wrapper.scrollLeft = 0;\n\t\t\t}\n\t\t}, 1000 );\n\n\t}\n\n\t/**\n\t * Creates an HTML element and returns a reference to it.\n\t * If the element already exists the existing instance will\n\t * be returned.\n\t *\n\t * @param {HTMLElement} container\n\t * @param {string} tagname\n\t * @param {string} classname\n\t * @param {string} innerHTML\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createSingletonNode( container, tagname, classname, innerHTML ) {\n\n\t\t// Find all nodes matching the description\n\t\tvar nodes = container.querySelectorAll( '.' + classname );\n\n\t\t// Check all matches to find one which is a direct child of\n\t\t// the specified container\n\t\tfor( var i = 0; i < nodes.length; i++ ) {\n\t\t\tvar testNode = nodes[i];\n\t\t\tif( testNode.parentNode === container ) {\n\t\t\t\treturn testNode;\n\t\t\t}\n\t\t}\n\n\t\t// If no node was found, create it now\n\t\tvar node = document.createElement( tagname );\n\t\tnode.classList.add( classname );\n\t\tif( typeof innerHTML === 'string' ) {\n\t\t\tnode.innerHTML = innerHTML;\n\t\t}\n\t\tcontainer.appendChild( node );\n\n\t\treturn node;\n\n\t}\n\n\t/**\n\t * Creates the slide background elements and appends them\n\t * to the background container. One element is created per\n\t * slide no matter if the given slide has visible background.\n\t */\n\tfunction createBackgrounds() {\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\t// Clear prior backgrounds\n\t\tdom.background.innerHTML = '';\n\t\tdom.background.classList.add( 'no-transition' );\n\n\t\t// Iterate over all horizontal slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( slideh ) {\n\n\t\t\tvar backgroundStack = createBackground( slideh, dom.background );\n\n\t\t\t// Iterate over all vertical slides\n\t\t\ttoArray( slideh.querySelectorAll( 'section' ) ).forEach( function( slidev ) {\n\n\t\t\t\tcreateBackground( slidev, backgroundStack );\n\n\t\t\t\tbackgroundStack.classList.add( 'stack' );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t// Add parallax background if specified\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tdom.background.style.backgroundImage = 'url(\"' + config.parallaxBackgroundImage + '\")';\n\t\t\tdom.background.style.backgroundSize = config.parallaxBackgroundSize;\n\n\t\t\t// Make sure the below properties are set on the element - these properties are\n\t\t\t// needed for proper transitions to be set on the element via CSS. To remove\n\t\t\t// annoying background slide-in effect when the presentation starts, apply\n\t\t\t// these properties after short time delay\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.wrapper.classList.add( 'has-parallax-background' );\n\t\t\t}, 1 );\n\n\t\t}\n\t\telse {\n\n\t\t\tdom.background.style.backgroundImage = '';\n\t\t\tdom.wrapper.classList.remove( 'has-parallax-background' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Creates a background for the given slide.\n\t *\n\t * @param {HTMLElement} slide\n\t * @param {HTMLElement} container The element that the background\n\t * should be appended to\n\t * @return {HTMLElement} New background div\n\t */\n\tfunction createBackground( slide, container ) {\n\n\t\tvar data = {\n\t\t\tbackground: slide.getAttribute( 'data-background' ),\n\t\t\tbackgroundSize: slide.getAttribute( 'data-background-size' ),\n\t\t\tbackgroundImage: slide.getAttribute( 'data-background-image' ),\n\t\t\tbackgroundVideo: slide.getAttribute( 'data-background-video' ),\n\t\t\tbackgroundIframe: slide.getAttribute( 'data-background-iframe' ),\n\t\t\tbackgroundColor: slide.getAttribute( 'data-background-color' ),\n\t\t\tbackgroundRepeat: slide.getAttribute( 'data-background-repeat' ),\n\t\t\tbackgroundPosition: slide.getAttribute( 'data-background-position' ),\n\t\t\tbackgroundTransition: slide.getAttribute( 'data-background-transition' )\n\t\t};\n\n\t\tvar element = document.createElement( 'div' );\n\n\t\t// Carry over custom classes from the slide to the background\n\t\telement.className = 'slide-background ' + slide.className.replace( /present|past|future/, '' );\n\n\t\tif( data.background ) {\n\t\t\t// Auto-wrap image urls in url(...)\n\t\t\tif( /^(http|file|\\/\\/)/gi.test( data.background ) || /\\.(svg|png|jpg|jpeg|gif|bmp)([?#]|$)/gi.test( data.background ) ) {\n\t\t\t\tslide.setAttribute( 'data-background-image', data.background );\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.background = data.background;\n\t\t\t}\n\t\t}\n\n\t\t// Create a hash for this combination of background settings.\n\t\t// This is used to determine when two slide backgrounds are\n\t\t// the same.\n\t\tif( data.background || data.backgroundColor || data.backgroundImage || data.backgroundVideo || data.backgroundIframe ) {\n\t\t\telement.setAttribute( 'data-background-hash', data.background +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundSize +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundImage +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundVideo +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundIframe +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundColor +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundRepeat +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundPosition +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundTransition );\n\t\t}\n\n\t\t// Additional and optional background properties\n\t\tif( data.backgroundSize ) element.style.backgroundSize = data.backgroundSize;\n\t\tif( data.backgroundSize ) element.setAttribute( 'data-background-size', data.backgroundSize );\n\t\tif( data.backgroundColor ) element.style.backgroundColor = data.backgroundColor;\n\t\tif( data.backgroundRepeat ) element.style.backgroundRepeat = data.backgroundRepeat;\n\t\tif( data.backgroundPosition ) element.style.backgroundPosition = data.backgroundPosition;\n\t\tif( data.backgroundTransition ) element.setAttribute( 'data-background-transition', data.backgroundTransition );\n\n\t\tcontainer.appendChild( element );\n\n\t\t// If backgrounds are being recreated, clear old classes\n\t\tslide.classList.remove( 'has-dark-background' );\n\t\tslide.classList.remove( 'has-light-background' );\n\n\t\tslide.slideBackgroundElement = element;\n\n\t\t// If this slide has a background color, add a class that\n\t\t// signals if it is light or dark. If the slide has no background\n\t\t// color, no class will be set\n\t\tvar computedBackgroundStyle = window.getComputedStyle( element );\n\t\tif( computedBackgroundStyle && computedBackgroundStyle.backgroundColor ) {\n\t\t\tvar rgb = colorToRgb( computedBackgroundStyle.backgroundColor );\n\n\t\t\t// Ignore fully transparent backgrounds. Some browsers return\n\t\t\t// rgba(0,0,0,0) when reading the computed background color of\n\t\t\t// an element with no background\n\t\t\tif( rgb && rgb.a !== 0 ) {\n\t\t\t\tif( colorBrightness( computedBackgroundStyle.backgroundColor ) < 128 ) {\n\t\t\t\t\tslide.classList.add( 'has-dark-background' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tslide.classList.add( 'has-light-background' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn element;\n\n\t}\n\n\t/**\n\t * Registers a listener to postMessage events, this makes it\n\t * possible to call all reveal.js API methods from another\n\t * window. For example:\n\t *\n\t * revealWindow.postMessage( JSON.stringify({\n\t *   method: 'slide',\n\t *   args: [ 2 ]\n\t * }), '*' );\n\t */\n\tfunction setupPostMessage() {\n\n\t\tif( config.postMessage ) {\n\t\t\twindow.addEventListener( 'message', function ( event ) {\n\t\t\t\tvar data = event.data;\n\n\t\t\t\t// Make sure we're dealing with JSON\n\t\t\t\tif( typeof data === 'string' && data.charAt( 0 ) === '{' && data.charAt( data.length - 1 ) === '}' ) {\n\t\t\t\t\tdata = JSON.parse( data );\n\n\t\t\t\t\t// Check if the requested method can be found\n\t\t\t\t\tif( data.method && typeof Reveal[data.method] === 'function' ) {\n\t\t\t\t\t\tReveal[data.method].apply( Reveal, data.args );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies the configuration settings from the config\n\t * object. May be called multiple times.\n\t *\n\t * @param {object} options\n\t */\n\tfunction configure( options ) {\n\n\t\tvar numberOfSlides = dom.wrapper.querySelectorAll( SLIDES_SELECTOR ).length;\n\n\t\tdom.wrapper.classList.remove( config.transition );\n\n\t\t// New config options may be passed when this method\n\t\t// is invoked through the API after initialization\n\t\tif( typeof options === 'object' ) extend( config, options );\n\n\t\t// Force linear transition based on browser capabilities\n\t\tif( features.transforms3d === false ) config.transition = 'linear';\n\n\t\tdom.wrapper.classList.add( config.transition );\n\n\t\tdom.wrapper.setAttribute( 'data-transition-speed', config.transitionSpeed );\n\t\tdom.wrapper.setAttribute( 'data-background-transition', config.backgroundTransition );\n\n\t\tdom.controls.style.display = config.controls ? 'block' : 'none';\n\t\tdom.progress.style.display = config.progress ? 'block' : 'none';\n\n\t\tif( config.shuffle ) {\n\t\t\tshuffle();\n\t\t}\n\n\t\tif( config.rtl ) {\n\t\t\tdom.wrapper.classList.add( 'rtl' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'rtl' );\n\t\t}\n\n\t\tif( config.center ) {\n\t\t\tdom.wrapper.classList.add( 'center' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'center' );\n\t\t}\n\n\t\t// Exit the paused mode if it was configured off\n\t\tif( config.pause === false ) {\n\t\t\tresume();\n\t\t}\n\n\t\tif( config.showNotes ) {\n\t\t\tdom.speakerNotes.classList.add( 'visible' );\n\t\t\tdom.speakerNotes.setAttribute( 'data-layout', typeof config.showNotes === 'string' ? config.showNotes : 'inline' );\n\t\t}\n\t\telse {\n\t\t\tdom.speakerNotes.classList.remove( 'visible' );\n\t\t}\n\n\t\tif( config.mouseWheel ) {\n\t\t\tdocument.addEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.addEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\t\telse {\n\t\t\tdocument.removeEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.removeEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\n\t\t// Rolling 3D links\n\t\tif( config.rollingLinks ) {\n\t\t\tenableRollingLinks();\n\t\t}\n\t\telse {\n\t\t\tdisableRollingLinks();\n\t\t}\n\n\t\t// Iframe link previews\n\t\tif( config.previewLinks ) {\n\t\t\tenablePreviewLinks();\n\t\t\tdisablePreviewLinks( '[data-preview-link=false]' );\n\t\t}\n\t\telse {\n\t\t\tdisablePreviewLinks();\n\t\t\tenablePreviewLinks( '[data-preview-link]:not([data-preview-link=false])' );\n\t\t}\n\n\t\t// Remove existing auto-slide controls\n\t\tif( autoSlidePlayer ) {\n\t\t\tautoSlidePlayer.destroy();\n\t\t\tautoSlidePlayer = null;\n\t\t}\n\n\t\t// Generate auto-slide controls if needed\n\t\tif( numberOfSlides > 1 && config.autoSlide && config.autoSlideStoppable && features.canvas && features.requestAnimationFrame ) {\n\t\t\tautoSlidePlayer = new Playback( dom.wrapper, function() {\n\t\t\t\treturn Math.min( Math.max( ( Date.now() - autoSlideStartTime ) / autoSlide, 0 ), 1 );\n\t\t\t} );\n\n\t\t\tautoSlidePlayer.on( 'click', onAutoSlidePlayerClick );\n\t\t\tautoSlidePaused = false;\n\t\t}\n\n\t\t// When fragments are turned off they should be visible\n\t\tif( config.fragments === false ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( '.fragment' ) ).forEach( function( element ) {\n\t\t\t\telement.classList.add( 'visible' );\n\t\t\t\telement.classList.remove( 'current-fragment' );\n\t\t\t} );\n\t\t}\n\n\t\t// Slide numbers\n\t\tvar slideNumberDisplay = 'none';\n\t\tif( config.slideNumber && !isPrintingPDF() ) {\n\t\t\tif( config.showSlideNumber === 'all' ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t\telse if( config.showSlideNumber === 'speaker' && isSpeakerNotes() ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t}\n\n\t\tdom.slideNumber.style.display = slideNumberDisplay;\n\n\t\tsync();\n\n\t}\n\n\t/**\n\t * Binds all event listeners.\n\t */\n\tfunction addEventListeners() {\n\n\t\teventsAreBound = true;\n\n\t\twindow.addEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t\tif( config.touch ) {\n\t\t\tdom.wrapper.addEventListener( 'touchstart', onTouchStart, false );\n\t\t\tdom.wrapper.addEventListener( 'touchmove', onTouchMove, false );\n\t\t\tdom.wrapper.addEventListener( 'touchend', onTouchEnd, false );\n\n\t\t\t// Support pointer-style touch interaction as well\n\t\t\tif( window.navigator.pointerEnabled ) {\n\t\t\t\t// IE 11 uses un-prefixed version of pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'pointerdown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointermove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointerup', onPointerUp, false );\n\t\t\t}\n\t\t\telse if( window.navigator.msPointerEnabled ) {\n\t\t\t\t// IE 10 uses prefixed version of pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerDown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerMove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerUp', onPointerUp, false );\n\t\t\t}\n\t\t}\n\n\t\tif( config.keyboard ) {\n\t\t\tdocument.addEventListener( 'keydown', onDocumentKeyDown, false );\n\t\t\tdocument.addEventListener( 'keypress', onDocumentKeyPress, false );\n\t\t}\n\n\t\tif( config.progress && dom.progress ) {\n\t\t\tdom.progress.addEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\tif( config.focusBodyOnPageVisibilityChange ) {\n\t\t\tvar visibilityChange;\n\n\t\t\tif( 'hidden' in document ) {\n\t\t\t\tvisibilityChange = 'visibilitychange';\n\t\t\t}\n\t\t\telse if( 'msHidden' in document ) {\n\t\t\t\tvisibilityChange = 'msvisibilitychange';\n\t\t\t}\n\t\t\telse if( 'webkitHidden' in document ) {\n\t\t\t\tvisibilityChange = 'webkitvisibilitychange';\n\t\t\t}\n\n\t\t\tif( visibilityChange ) {\n\t\t\t\tdocument.addEventListener( visibilityChange, onPageVisibilityChange, false );\n\t\t\t}\n\t\t}\n\n\t\t// Listen to both touch and click events, in case the device\n\t\t// supports both\n\t\tvar pointerEvents = [ 'touchstart', 'click' ];\n\n\t\t// Only support touch for Android, fixes double navigations in\n\t\t// stock browser\n\t\tif( UA.match( /android/gi ) ) {\n\t\t\tpointerEvents = [ 'touchstart' ];\n\t\t}\n\n\t\tpointerEvents.forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.addEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.addEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.addEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.addEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.addEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.addEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbinds all event listeners.\n\t */\n\tfunction removeEventListeners() {\n\n\t\teventsAreBound = false;\n\n\t\tdocument.removeEventListener( 'keydown', onDocumentKeyDown, false );\n\t\tdocument.removeEventListener( 'keypress', onDocumentKeyPress, false );\n\t\twindow.removeEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.removeEventListener( 'resize', onWindowResize, false );\n\n\t\tdom.wrapper.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tdom.wrapper.removeEventListener( 'touchmove', onTouchMove, false );\n\t\tdom.wrapper.removeEventListener( 'touchend', onTouchEnd, false );\n\n\t\t// IE11\n\t\tif( window.navigator.pointerEnabled ) {\n\t\t\tdom.wrapper.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\t\tdom.wrapper.removeEventListener( 'pointermove', onPointerMove, false );\n\t\t\tdom.wrapper.removeEventListener( 'pointerup', onPointerUp, false );\n\t\t}\n\t\t// IE10\n\t\telse if( window.navigator.msPointerEnabled ) {\n\t\t\tdom.wrapper.removeEventListener( 'MSPointerDown', onPointerDown, false );\n\t\t\tdom.wrapper.removeEventListener( 'MSPointerMove', onPointerMove, false );\n\t\t\tdom.wrapper.removeEventListener( 'MSPointerUp', onPointerUp, false );\n\t\t}\n\n\t\tif ( config.progress && dom.progress ) {\n\t\t\tdom.progress.removeEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\t[ 'touchstart', 'click' ].forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.removeEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.removeEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.removeEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.removeEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.removeEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.removeEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Extend object a with the properties of object b.\n\t * If there's a conflict, object b takes precedence.\n\t *\n\t * @param {object} a\n\t * @param {object} b\n\t */\n\tfunction extend( a, b ) {\n\n\t\tfor( var i in b ) {\n\t\t\ta[ i ] = b[ i ];\n\t\t}\n\n\t}\n\n\t/**\n\t * Converts the target object to an array.\n\t *\n\t * @param {object} o\n\t * @return {object[]}\n\t */\n\tfunction toArray( o ) {\n\n\t\treturn Array.prototype.slice.call( o );\n\n\t}\n\n\t/**\n\t * Utility for deserializing a value.\n\t *\n\t * @param {*} value\n\t * @return {*}\n\t */\n\tfunction deserialize( value ) {\n\n\t\tif( typeof value === 'string' ) {\n\t\t\tif( value === 'null' ) return null;\n\t\t\telse if( value === 'true' ) return true;\n\t\t\telse if( value === 'false' ) return false;\n\t\t\telse if( value.match( /^[\\d\\.]+$/ ) ) return parseFloat( value );\n\t\t}\n\n\t\treturn value;\n\n\t}\n\n\t/**\n\t * Measures the distance in pixels between point a\n\t * and point b.\n\t *\n\t * @param {object} a point with x/y properties\n\t * @param {object} b point with x/y properties\n\t *\n\t * @return {number}\n\t */\n\tfunction distanceBetween( a, b ) {\n\n\t\tvar dx = a.x - b.x,\n\t\t\tdy = a.y - b.y;\n\n\t\treturn Math.sqrt( dx*dx + dy*dy );\n\n\t}\n\n\t/**\n\t * Applies a CSS transform to the target element.\n\t *\n\t * @param {HTMLElement} element\n\t * @param {string} transform\n\t */\n\tfunction transformElement( element, transform ) {\n\n\t\telement.style.WebkitTransform = transform;\n\t\telement.style.MozTransform = transform;\n\t\telement.style.msTransform = transform;\n\t\telement.style.transform = transform;\n\n\t}\n\n\t/**\n\t * Applies CSS transforms to the slides container. The container\n\t * is transformed from two separate sources: layout and the overview\n\t * mode.\n\t *\n\t * @param {object} transforms\n\t */\n\tfunction transformSlides( transforms ) {\n\n\t\t// Pick up new transforms from arguments\n\t\tif( typeof transforms.layout === 'string' ) slidesTransform.layout = transforms.layout;\n\t\tif( typeof transforms.overview === 'string' ) slidesTransform.overview = transforms.overview;\n\n\t\t// Apply the transforms to the slides container\n\t\tif( slidesTransform.layout ) {\n\t\t\ttransformElement( dom.slides, slidesTransform.layout + ' ' + slidesTransform.overview );\n\t\t}\n\t\telse {\n\t\t\ttransformElement( dom.slides, slidesTransform.overview );\n\t\t}\n\n\t}\n\n\t/**\n\t * Injects the given CSS styles into the DOM.\n\t *\n\t * @param {string} value\n\t */\n\tfunction injectStyleSheet( value ) {\n\n\t\tvar tag = document.createElement( 'style' );\n\t\ttag.type = 'text/css';\n\t\tif( tag.styleSheet ) {\n\t\t\ttag.styleSheet.cssText = value;\n\t\t}\n\t\telse {\n\t\t\ttag.appendChild( document.createTextNode( value ) );\n\t\t}\n\t\tdocument.getElementsByTagName( 'head' )[0].appendChild( tag );\n\n\t}\n\n\t/**\n\t * Find the closest parent that matches the given\n\t * selector.\n\t *\n\t * @param {HTMLElement} target The child element\n\t * @param {String} selector The CSS selector to match\n\t * the parents against\n\t *\n\t * @return {HTMLElement} The matched parent or null\n\t * if no matching parent was found\n\t */\n\tfunction closestParent( target, selector ) {\n\n\t\tvar parent = target.parentNode;\n\n\t\twhile( parent ) {\n\n\t\t\t// There's some overhead doing this each time, we don't\n\t\t\t// want to rewrite the element prototype but should still\n\t\t\t// be enough to feature detect once at startup...\n\t\t\tvar matchesMethod = parent.matches || parent.matchesSelector || parent.msMatchesSelector;\n\n\t\t\t// If we find a match, we're all set\n\t\t\tif( matchesMethod && matchesMethod.call( parent, selector ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\t// Keep searching\n\t\t\tparent = parent.parentNode;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Converts various color input formats to an {r:0,g:0,b:0} object.\n\t *\n\t * @param {string} color The string representation of a color\n\t * @example\n\t * colorToRgb('#000');\n\t * @example\n\t * colorToRgb('#000000');\n\t * @example\n\t * colorToRgb('rgb(0,0,0)');\n\t * @example\n\t * colorToRgb('rgba(0,0,0)');\n\t *\n\t * @return {{r: number, g: number, b: number, [a]: number}|null}\n\t */\n\tfunction colorToRgb( color ) {\n\n\t\tvar hex3 = color.match( /^#([0-9a-f]{3})$/i );\n\t\tif( hex3 && hex3[1] ) {\n\t\t\thex3 = hex3[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex3.charAt( 0 ), 16 ) * 0x11,\n\t\t\t\tg: parseInt( hex3.charAt( 1 ), 16 ) * 0x11,\n\t\t\t\tb: parseInt( hex3.charAt( 2 ), 16 ) * 0x11\n\t\t\t};\n\t\t}\n\n\t\tvar hex6 = color.match( /^#([0-9a-f]{6})$/i );\n\t\tif( hex6 && hex6[1] ) {\n\t\t\thex6 = hex6[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex6.substr( 0, 2 ), 16 ),\n\t\t\t\tg: parseInt( hex6.substr( 2, 2 ), 16 ),\n\t\t\t\tb: parseInt( hex6.substr( 4, 2 ), 16 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgb = color.match( /^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i );\n\t\tif( rgb ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgb[1], 10 ),\n\t\t\t\tg: parseInt( rgb[2], 10 ),\n\t\t\t\tb: parseInt( rgb[3], 10 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgba = color.match( /^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\,\\s*([\\d]+|[\\d]*.[\\d]+)\\s*\\)$/i );\n\t\tif( rgba ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgba[1], 10 ),\n\t\t\t\tg: parseInt( rgba[2], 10 ),\n\t\t\t\tb: parseInt( rgba[3], 10 ),\n\t\t\t\ta: parseFloat( rgba[4] )\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculates brightness on a scale of 0-255.\n\t *\n\t * @param {string} color See colorToRgb for supported formats.\n\t * @see {@link colorToRgb}\n\t */\n\tfunction colorBrightness( color ) {\n\n\t\tif( typeof color === 'string' ) color = colorToRgb( color );\n\n\t\tif( color ) {\n\t\t\treturn ( color.r * 299 + color.g * 587 + color.b * 114 ) / 1000;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Returns the remaining height within the parent of the\n\t * target element.\n\t *\n\t * remaining height = [ configured parent height ] - [ current parent height ]\n\t *\n\t * @param {HTMLElement} element\n\t * @param {number} [height]\n\t */\n\tfunction getRemainingHeight( element, height ) {\n\n\t\theight = height || 0;\n\n\t\tif( element ) {\n\t\t\tvar newHeight, oldHeight = element.style.height;\n\n\t\t\t// Change the .stretch element height to 0 in order find the height of all\n\t\t\t// the other elements\n\t\t\telement.style.height = '0px';\n\t\t\tnewHeight = height - element.parentNode.offsetHeight;\n\n\t\t\t// Restore the old height, just in case\n\t\t\telement.style.height = oldHeight + 'px';\n\n\t\t\treturn newHeight;\n\t\t}\n\n\t\treturn height;\n\n\t}\n\n\t/**\n\t * Checks if this instance is being used to print a PDF.\n\t */\n\tfunction isPrintingPDF() {\n\n\t\treturn ( /print-pdf/gi ).test( window.location.search );\n\n\t}\n\n\t/**\n\t * Hides the address bar if we're on a mobile device.\n\t */\n\tfunction hideAddressBar() {\n\n\t\tif( config.hideAddressBar && isMobileDevice ) {\n\t\t\t// Events that should trigger the address bar to hide\n\t\t\twindow.addEventListener( 'load', removeAddressBar, false );\n\t\t\twindow.addEventListener( 'orientationchange', removeAddressBar, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Causes the address bar to hide on mobile devices,\n\t * more vertical space ftw.\n\t */\n\tfunction removeAddressBar() {\n\n\t\tsetTimeout( function() {\n\t\t\twindow.scrollTo( 0, 1 );\n\t\t}, 10 );\n\n\t}\n\n\t/**\n\t * Dispatches an event of the specified type from the\n\t * reveal DOM element.\n\t */\n\tfunction dispatchEvent( type, args ) {\n\n\t\tvar event = document.createEvent( 'HTMLEvents', 1, 2 );\n\t\tevent.initEvent( type, true, true );\n\t\textend( event, args );\n\t\tdom.wrapper.dispatchEvent( event );\n\n\t\t// If we're in an iframe, post each reveal.js event to the\n\t\t// parent window. Used by the notes plugin\n\t\tif( config.postMessageEvents && window.parent !== window.self ) {\n\t\t\twindow.parent.postMessage( JSON.stringify({ namespace: 'reveal', eventName: type, state: getState() }), '*' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Wrap all links in 3D goodness.\n\t */\n\tfunction enableRollingLinks() {\n\n\t\tif( features.transforms3d && !( 'msPerspective' in document.body.style ) ) {\n\t\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a' );\n\n\t\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\t\tvar anchor = anchors[i];\n\n\t\t\t\tif( anchor.textContent && !anchor.querySelector( '*' ) && ( !anchor.className || !anchor.classList.contains( anchor, 'roll' ) ) ) {\n\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t\tspan.setAttribute('data-title', anchor.text);\n\t\t\t\t\tspan.innerHTML = anchor.innerHTML;\n\n\t\t\t\t\tanchor.classList.add( 'roll' );\n\t\t\t\t\tanchor.innerHTML = '';\n\t\t\t\t\tanchor.appendChild(span);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Unwrap all 3D links.\n\t */\n\tfunction disableRollingLinks() {\n\n\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a.roll' );\n\n\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\tvar anchor = anchors[i];\n\t\t\tvar span = anchor.querySelector( 'span' );\n\n\t\t\tif( span ) {\n\t\t\t\tanchor.classList.remove( 'roll' );\n\t\t\t\tanchor.innerHTML = span.innerHTML;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Bind preview frame links.\n\t *\n\t * @param {string} [selector=a] - selector for anchors\n\t */\n\tfunction enablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.addEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbind preview frame links.\n\t */\n\tfunction disablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.removeEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Opens a preview window for the target URL.\n\t *\n\t * @param {string} url - url for preview iframe src\n\t */\n\tfunction showPreview( url ) {\n\n\t\tcloseOverlay();\n\n\t\tdom.overlay = document.createElement( 'div' );\n\t\tdom.overlay.classList.add( 'overlay' );\n\t\tdom.overlay.classList.add( 'overlay-preview' );\n\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\tdom.overlay.innerHTML = [\n\t\t\t'<header>',\n\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t\t'<a class=\"external\" href=\"'+ url +'\" target=\"_blank\"><span class=\"icon\"></span></a>',\n\t\t\t'</header>',\n\t\t\t'<div class=\"spinner\"></div>',\n\t\t\t'<div class=\"viewport\">',\n\t\t\t\t'<iframe src=\"'+ url +'\"></iframe>',\n\t\t\t\t'<small class=\"viewport-inner\">',\n\t\t\t\t\t'<span class=\"x-frame-error\">Unable to load iframe. This is likely due to the site\\'s policy (x-frame-options).</span>',\n\t\t\t\t'</small>',\n\t\t\t'</div>'\n\t\t].join('');\n\n\t\tdom.overlay.querySelector( 'iframe' ).addEventListener( 'load', function( event ) {\n\t\t\tdom.overlay.classList.add( 'loaded' );\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t\tevent.preventDefault();\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.external' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t}, false );\n\n\t\tsetTimeout( function() {\n\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Open or close help overlay window.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * help is open, false means it's closed.\n\t */\n\tfunction toggleHelp( override ){\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? showHelp() : closeOverlay();\n\t\t}\n\t\telse {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tshowHelp();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Opens an overlay window with help material.\n\t */\n\tfunction showHelp() {\n\n\t\tif( config.help ) {\n\n\t\t\tcloseOverlay();\n\n\t\t\tdom.overlay = document.createElement( 'div' );\n\t\t\tdom.overlay.classList.add( 'overlay' );\n\t\t\tdom.overlay.classList.add( 'overlay-help' );\n\t\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\t\tvar html = '<p class=\"title\">Keyboard Shortcuts</p><br/>';\n\n\t\t\thtml += '<table><th>KEY</th><th>ACTION</th>';\n\t\t\tfor( var key in keyboardShortcuts ) {\n\t\t\t\thtml += '<tr><td>' + key + '</td><td>' + keyboardShortcuts[ key ] + '</td></tr>';\n\t\t\t}\n\n\t\t\thtml += '</table>';\n\n\t\t\tdom.overlay.innerHTML = [\n\t\t\t\t'<header>',\n\t\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t\t'</header>',\n\t\t\t\t'<div class=\"viewport\">',\n\t\t\t\t\t'<div class=\"viewport-inner\">'+ html +'</div>',\n\t\t\t\t'</div>'\n\t\t\t].join('');\n\n\t\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\t\tcloseOverlay();\n\t\t\t\tevent.preventDefault();\n\t\t\t}, false );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t\t}, 1 );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Closes any currently open overlay.\n\t */\n\tfunction closeOverlay() {\n\n\t\tif( dom.overlay ) {\n\t\t\tdom.overlay.parentNode.removeChild( dom.overlay );\n\t\t\tdom.overlay = null;\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies JavaScript-controlled layout rules to the\n\t * presentation.\n\t */\n\tfunction layout() {\n\n\t\tif( dom.wrapper && !isPrintingPDF() ) {\n\n\t\t\tvar size = getComputedSlideSize();\n\n\t\t\t// Layout the contents of the slides\n\t\t\tlayoutSlideContents( config.width, config.height );\n\n\t\t\tdom.slides.style.width = size.width + 'px';\n\t\t\tdom.slides.style.height = size.height + 'px';\n\n\t\t\t// Determine scale of content to fit within available space\n\t\t\tscale = Math.min( size.presentationWidth / size.width, size.presentationHeight / size.height );\n\n\t\t\t// Respect max/min scale settings\n\t\t\tscale = Math.max( scale, config.minScale );\n\t\t\tscale = Math.min( scale, config.maxScale );\n\n\t\t\t// Don't apply any scaling styles if scale is 1\n\t\t\tif( scale === 1 ) {\n\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\tdom.slides.style.left = '';\n\t\t\t\tdom.slides.style.top = '';\n\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\tdom.slides.style.right = '';\n\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Prefer zoom for scaling up so that content remains crisp.\n\t\t\t\t// Don't use zoom to scale down since that can lead to shifts\n\t\t\t\t// in text layout/line breaks.\n\t\t\t\tif( scale > 1 && features.zoom ) {\n\t\t\t\t\tdom.slides.style.zoom = scale;\n\t\t\t\t\tdom.slides.style.left = '';\n\t\t\t\t\tdom.slides.style.top = '';\n\t\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\t\tdom.slides.style.right = '';\n\t\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t\t}\n\t\t\t\t// Apply scale transform as a fallback\n\t\t\t\telse {\n\t\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\t\tdom.slides.style.left = '50%';\n\t\t\t\t\tdom.slides.style.top = '50%';\n\t\t\t\t\tdom.slides.style.bottom = 'auto';\n\t\t\t\t\tdom.slides.style.right = 'auto';\n\t\t\t\t\ttransformSlides( { layout: 'translate(-50%, -50%) scale('+ scale +')' } );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Select all slides, vertical and horizontal\n\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) );\n\n\t\t\tfor( var i = 0, len = slides.length; i < len; i++ ) {\n\t\t\t\tvar slide = slides[ i ];\n\n\t\t\t\t// Don't bother updating invisible slides\n\t\t\t\tif( slide.style.display === 'none' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif( config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\t// Vertical stacks are not centred since their section\n\t\t\t\t\t// children will be\n\t\t\t\t\tif( slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\t\tslide.style.top = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tslide.style.top = Math.max( ( size.height - slide.scrollHeight ) / 2, 0 ) + 'px';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tslide.style.top = '';\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tupdateProgress();\n\t\t\tupdateParallax();\n\n\t\t\tif( isOverview() ) {\n\t\t\t\tupdateOverview();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies layout logic to the contents of all slides in\n\t * the presentation.\n\t *\n\t * @param {string|number} width\n\t * @param {string|number} height\n\t */\n\tfunction layoutSlideContents( width, height ) {\n\n\t\t// Handle sizing of elements with the 'stretch' class\n\t\ttoArray( dom.slides.querySelectorAll( 'section > .stretch' ) ).forEach( function( element ) {\n\n\t\t\t// Determine how much vertical space we can use\n\t\t\tvar remainingHeight = getRemainingHeight( element, height );\n\n\t\t\t// Consider the aspect ratio of media elements\n\t\t\tif( /(img|video)/gi.test( element.nodeName ) ) {\n\t\t\t\tvar nw = element.naturalWidth || element.videoWidth,\n\t\t\t\t\tnh = element.naturalHeight || element.videoHeight;\n\n\t\t\t\tvar es = Math.min( width / nw, remainingHeight / nh );\n\n\t\t\t\telement.style.width = ( nw * es ) + 'px';\n\t\t\t\telement.style.height = ( nh * es ) + 'px';\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.width = width + 'px';\n\t\t\t\telement.style.height = remainingHeight + 'px';\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Calculates the computed pixel size of our slides. These\n\t * values are based on the width and height configuration\n\t * options.\n\t *\n\t * @param {number} [presentationWidth=dom.wrapper.offsetWidth]\n\t * @param {number} [presentationHeight=dom.wrapper.offsetHeight]\n\t */\n\tfunction getComputedSlideSize( presentationWidth, presentationHeight ) {\n\n\t\tvar size = {\n\t\t\t// Slide size\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\n\t\t\t// Presentation size\n\t\t\tpresentationWidth: presentationWidth || dom.wrapper.offsetWidth,\n\t\t\tpresentationHeight: presentationHeight || dom.wrapper.offsetHeight\n\t\t};\n\n\t\t// Reduce available space by margin\n\t\tsize.presentationWidth -= ( size.presentationWidth * config.margin );\n\t\tsize.presentationHeight -= ( size.presentationHeight * config.margin );\n\n\t\t// Slide width may be a percentage of available width\n\t\tif( typeof size.width === 'string' && /%$/.test( size.width ) ) {\n\t\t\tsize.width = parseInt( size.width, 10 ) / 100 * size.presentationWidth;\n\t\t}\n\n\t\t// Slide height may be a percentage of available height\n\t\tif( typeof size.height === 'string' && /%$/.test( size.height ) ) {\n\t\t\tsize.height = parseInt( size.height, 10 ) / 100 * size.presentationHeight;\n\t\t}\n\n\t\treturn size;\n\n\t}\n\n\t/**\n\t * Stores the vertical index of a stack so that the same\n\t * vertical slide can be selected when navigating to and\n\t * from the stack.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t * @param {string|number} [v=0] Index to memorize\n\t */\n\tfunction setPreviousVerticalIndex( stack, v ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' ) {\n\t\t\tstack.setAttribute( 'data-previous-indexv', v || 0 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Retrieves the vertical index which was stored using\n\t * #setPreviousVerticalIndex() or 0 if no previous index\n\t * exists.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t */\n\tfunction getPreviousVerticalIndex( stack ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' && stack.classList.contains( 'stack' ) ) {\n\t\t\t// Prefer manually defined start-indexv\n\t\t\tvar attributeName = stack.hasAttribute( 'data-start-indexv' ) ? 'data-start-indexv' : 'data-previous-indexv';\n\n\t\t\treturn parseInt( stack.getAttribute( attributeName ) || 0, 10 );\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Displays the overview of slides (quick nav) by scaling\n\t * down and arranging all slide elements.\n\t */\n\tfunction activateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview && !isOverview() ) {\n\n\t\t\toverview = true;\n\n\t\t\tdom.wrapper.classList.add( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\n\t\t\tif( features.overviewTransitions ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tdom.wrapper.classList.add( 'overview-animated' );\n\t\t\t\t}, 1 );\n\t\t\t}\n\n\t\t\t// Don't auto-slide while in overview mode\n\t\t\tcancelAutoSlide();\n\n\t\t\t// Move the backgrounds element into the slide container to\n\t\t\t// that the same scaling is applied\n\t\t\tdom.slides.appendChild( dom.background );\n\n\t\t\t// Clicking on an overview slide navigates to it\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\tif( !slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\tslide.addEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Calculate slide sizes\n\t\t\tvar margin = 70;\n\t\t\tvar slideSize = getComputedSlideSize();\n\t\t\toverviewSlideWidth = slideSize.width + margin;\n\t\t\toverviewSlideHeight = slideSize.height + margin;\n\n\t\t\t// Reverse in RTL mode\n\t\t\tif( config.rtl ) {\n\t\t\t\toverviewSlideWidth = -overviewSlideWidth;\n\t\t\t}\n\n\t\t\tupdateSlidesVisibility();\n\t\t\tlayoutOverview();\n\t\t\tupdateOverview();\n\n\t\t\tlayout();\n\n\t\t\t// Notify observers of the overview showing\n\t\t\tdispatchEvent( 'overviewshown', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Uses CSS transforms to position all slides in a grid for\n\t * display inside of the overview mode.\n\t */\n\tfunction layoutOverview() {\n\n\t\t// Layout slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( hslide, h ) {\n\t\t\thslide.setAttribute( 'data-index-h', h );\n\t\t\ttransformElement( hslide, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\tif( hslide.classList.contains( 'stack' ) ) {\n\n\t\t\t\ttoArray( hslide.querySelectorAll( 'section' ) ).forEach( function( vslide, v ) {\n\t\t\t\t\tvslide.setAttribute( 'data-index-h', h );\n\t\t\t\t\tvslide.setAttribute( 'data-index-v', v );\n\n\t\t\t\t\ttransformElement( vslide, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\n\t\t// Layout slide backgrounds\n\t\ttoArray( dom.background.childNodes ).forEach( function( hbackground, h ) {\n\t\t\ttransformElement( hbackground, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\ttoArray( hbackground.querySelectorAll( '.slide-background' ) ).forEach( function( vbackground, v ) {\n\t\t\t\ttransformElement( vbackground, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Moves the overview viewport to the current slides.\n\t * Called each time the current slide changes.\n\t */\n\tfunction updateOverview() {\n\n\t\tvar vmin = Math.min( window.innerWidth, window.innerHeight );\n\t\tvar scale = Math.max( vmin / 5, 150 ) / vmin;\n\n\t\ttransformSlides( {\n\t\t\toverview: [\n\t\t\t\t'scale('+ scale +')',\n\t\t\t\t'translateX('+ ( -indexh * overviewSlideWidth ) +'px)',\n\t\t\t\t'translateY('+ ( -indexv * overviewSlideHeight ) +'px)'\n\t\t\t].join( ' ' )\n\t\t} );\n\n\t}\n\n\t/**\n\t * Exits the slide overview and enters the currently\n\t * active slide.\n\t */\n\tfunction deactivateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview ) {\n\n\t\t\toverview = false;\n\n\t\t\tdom.wrapper.classList.remove( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-animated' );\n\n\t\t\t// Temporarily add a class so that transitions can do different things\n\t\t\t// depending on whether they are exiting/entering overview, or just\n\t\t\t// moving from slide to slide\n\t\t\tdom.wrapper.classList.add( 'overview-deactivating' );\n\n\t\t\tsetTimeout( function () {\n\t\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\t\t\t}, 1 );\n\n\t\t\t// Move the background element back out\n\t\t\tdom.wrapper.appendChild( dom.background );\n\n\t\t\t// Clean up changes made to slides\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\ttransformElement( slide, '' );\n\n\t\t\t\tslide.removeEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t} );\n\n\t\t\t// Clean up changes made to backgrounds\n\t\t\ttoArray( dom.background.querySelectorAll( '.slide-background' ) ).forEach( function( background ) {\n\t\t\t\ttransformElement( background, '' );\n\t\t\t} );\n\n\t\t\ttransformSlides( { overview: '' } );\n\n\t\t\tslide( indexh, indexv );\n\n\t\t\tlayout();\n\n\t\t\tcueAutoSlide();\n\n\t\t\t// Notify observers of the overview hiding\n\t\t\tdispatchEvent( 'overviewhidden', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\t}\n\n\t/**\n\t * Toggles the slide overview mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * overview is open, false means it's closed.\n\t */\n\tfunction toggleOverview( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? activateOverview() : deactivateOverview();\n\t\t}\n\t\telse {\n\t\t\tisOverview() ? deactivateOverview() : activateOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the overview is currently active.\n\t *\n\t * @return {Boolean} true if the overview is active,\n\t * false otherwise\n\t */\n\tfunction isOverview() {\n\n\t\treturn overview;\n\n\t}\n\n\t/**\n\t * Checks if the current or specified slide is vertical\n\t * (nested within another slide).\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide to check\n\t * orientation of\n\t * @return {Boolean}\n\t */\n\tfunction isVerticalSlide( slide ) {\n\n\t\t// Prefer slide argument, otherwise use current slide\n\t\tslide = slide ? slide : currentSlide;\n\n\t\treturn slide && slide.parentNode && !!slide.parentNode.nodeName.match( /section/i );\n\n\t}\n\n\t/**\n\t * Handling the fullscreen functionality via the fullscreen API\n\t *\n\t * @see http://fullscreen.spec.whatwg.org/\n\t * @see https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode\n\t */\n\tfunction enterFullscreen() {\n\n\t\tvar element = document.documentElement;\n\n\t\t// Check which implementation is available\n\t\tvar requestMethod = element.requestFullscreen ||\n\t\t\t\t\t\t\telement.webkitRequestFullscreen ||\n\t\t\t\t\t\t\telement.webkitRequestFullScreen ||\n\t\t\t\t\t\t\telement.mozRequestFullScreen ||\n\t\t\t\t\t\t\telement.msRequestFullscreen;\n\n\t\tif( requestMethod ) {\n\t\t\trequestMethod.apply( element );\n\t\t}\n\n\t}\n\n\t/**\n\t * Enters the paused mode which fades everything on screen to\n\t * black.\n\t */\n\tfunction pause() {\n\n\t\tif( config.pause ) {\n\t\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\n\t\t\tcancelAutoSlide();\n\t\t\tdom.wrapper.classList.add( 'paused' );\n\n\t\t\tif( wasPaused === false ) {\n\t\t\t\tdispatchEvent( 'paused' );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Exits from the paused mode.\n\t */\n\tfunction resume() {\n\n\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\t\tdom.wrapper.classList.remove( 'paused' );\n\n\t\tcueAutoSlide();\n\n\t\tif( wasPaused ) {\n\t\t\tdispatchEvent( 'resumed' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Toggles the paused mode on and off.\n\t */\n\tfunction togglePause( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? pause() : resume();\n\t\t}\n\t\telse {\n\t\t\tisPaused() ? resume() : pause();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if we are currently in the paused mode.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isPaused() {\n\n\t\treturn dom.wrapper.classList.contains( 'paused' );\n\n\t}\n\n\t/**\n\t * Toggles the auto slide mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which sets the desired state.\n\t * True means autoplay starts, false means it stops.\n\t */\n\n\tfunction toggleAutoSlide( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t\telse {\n\t\t\tautoSlidePaused ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the auto slide mode is currently on.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isAutoSliding() {\n\n\t\treturn !!( autoSlide && !autoSlidePaused );\n\n\t}\n\n\t/**\n\t * Steps from the current point in the presentation to the\n\t * slide which matches the specified horizontal and vertical\n\t * indices.\n\t *\n\t * @param {number} [h=indexh] Horizontal index of the target slide\n\t * @param {number} [v=indexv] Vertical index of the target slide\n\t * @param {number} [f] Index of a fragment within the\n\t * target slide to activate\n\t * @param {number} [o] Origin for use in multimaster environments\n\t */\n\tfunction slide( h, v, f, o ) {\n\n\t\t// Remember where we were at before\n\t\tpreviousSlide = currentSlide;\n\n\t\t// Query all horizontal slides in the deck\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR );\n\n\t\t// Abort if there are no slides\n\t\tif( horizontalSlides.length === 0 ) return;\n\n\t\t// If no vertical index is specified and the upcoming slide is a\n\t\t// stack, resume at its previous vertical index\n\t\tif( v === undefined && !isOverview() ) {\n\t\t\tv = getPreviousVerticalIndex( horizontalSlides[ h ] );\n\t\t}\n\n\t\t// If we were on a vertical stack, remember what vertical index\n\t\t// it was on so we can resume at the same position when returning\n\t\tif( previousSlide && previousSlide.parentNode && previousSlide.parentNode.classList.contains( 'stack' ) ) {\n\t\t\tsetPreviousVerticalIndex( previousSlide.parentNode, indexv );\n\t\t}\n\n\t\t// Remember the state before this slide\n\t\tvar stateBefore = state.concat();\n\n\t\t// Reset the state array\n\t\tstate.length = 0;\n\n\t\tvar indexhBefore = indexh || 0,\n\t\t\tindexvBefore = indexv || 0;\n\n\t\t// Activate and transition to the new slide\n\t\tindexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === undefined ? indexh : h );\n\t\tindexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === undefined ? indexv : v );\n\n\t\t// Update the visibility of slides now that the indices have changed\n\t\tupdateSlidesVisibility();\n\n\t\tlayout();\n\n\t\t// Apply the new state\n\t\tstateLoop: for( var i = 0, len = state.length; i < len; i++ ) {\n\t\t\t// Check if this state existed on the previous slide. If it\n\t\t\t// did, we will avoid adding it repeatedly\n\t\t\tfor( var j = 0; j < stateBefore.length; j++ ) {\n\t\t\t\tif( stateBefore[j] === state[i] ) {\n\t\t\t\t\tstateBefore.splice( j, 1 );\n\t\t\t\t\tcontinue stateLoop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument.documentElement.classList.add( state[i] );\n\n\t\t\t// Dispatch custom event matching the state's name\n\t\t\tdispatchEvent( state[i] );\n\t\t}\n\n\t\t// Clean up the remains of the previous state\n\t\twhile( stateBefore.length ) {\n\t\t\tdocument.documentElement.classList.remove( stateBefore.pop() );\n\t\t}\n\n\t\t// Update the overview if it's currently active\n\t\tif( isOverview() ) {\n\t\t\tupdateOverview();\n\t\t}\n\n\t\t// Find the current horizontal slide and any possible vertical slides\n\t\t// within it\n\t\tvar currentHorizontalSlide = horizontalSlides[ indexh ],\n\t\t\tcurrentVerticalSlides = currentHorizontalSlide.querySelectorAll( 'section' );\n\n\t\t// Store references to the previous and current slides\n\t\tcurrentSlide = currentVerticalSlides[ indexv ] || currentHorizontalSlide;\n\n\t\t// Show fragment, if specified\n\t\tif( typeof f !== 'undefined' ) {\n\t\t\tnavigateFragment( f );\n\t\t}\n\n\t\t// Dispatch an event if the slide changed\n\t\tvar slideChanged = ( indexh !== indexhBefore || indexv !== indexvBefore );\n\t\tif( slideChanged ) {\n\t\t\tdispatchEvent( 'slidechanged', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'previousSlide': previousSlide,\n\t\t\t\t'currentSlide': currentSlide,\n\t\t\t\t'origin': o\n\t\t\t} );\n\t\t}\n\t\telse {\n\t\t\t// Ensure that the previous slide is never the same as the current\n\t\t\tpreviousSlide = null;\n\t\t}\n\n\t\t// Solves an edge case where the previous slide maintains the\n\t\t// 'present' class when navigating between adjacent vertical\n\t\t// stacks\n\t\tif( previousSlide ) {\n\t\t\tpreviousSlide.classList.remove( 'present' );\n\t\t\tpreviousSlide.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t// Reset all slides upon navigate to home\n\t\t\t// Issue: #285\n\t\t\tif ( dom.wrapper.querySelector( HOME_SLIDE_SELECTOR ).classList.contains( 'present' ) ) {\n\t\t\t\t// Launch async task\n\t\t\t\tsetTimeout( function () {\n\t\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.stack') ), i;\n\t\t\t\t\tfor( i in slides ) {\n\t\t\t\t\t\tif( slides[i] ) {\n\t\t\t\t\t\t\t// Reset stack\n\t\t\t\t\t\t\tsetPreviousVerticalIndex( slides[i], 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0 );\n\t\t\t}\n\t\t}\n\n\t\t// Handle embedded content\n\t\tif( slideChanged || !previousSlide ) {\n\t\t\tstopEmbeddedContent( previousSlide );\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\t// Announce the current slide contents, for screen readers\n\t\tdom.statusDiv.textContent = getStatusText( currentSlide );\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateBackground();\n\t\tupdateParallax();\n\t\tupdateSlideNumber();\n\t\tupdateNotes();\n\n\t\t// Update the URL hash\n\t\twriteURL();\n\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Syncs the presentation with the current DOM. Useful\n\t * when new slides or control elements are added or when\n\t * the configuration has changed.\n\t */\n\tfunction sync() {\n\n\t\t// Subscribe to input\n\t\tremoveEventListeners();\n\t\taddEventListeners();\n\n\t\t// Force a layout to make sure the current config is accounted for\n\t\tlayout();\n\n\t\t// Reflect the current autoSlide value\n\t\tautoSlide = config.autoSlide;\n\n\t\t// Start auto-sliding if it's enabled\n\t\tcueAutoSlide();\n\n\t\t// Re-create the slide backgrounds\n\t\tcreateBackgrounds();\n\n\t\t// Write the current hash to the URL\n\t\twriteURL();\n\n\t\tsortAllFragments();\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateSlideNumber();\n\t\tupdateSlidesVisibility();\n\t\tupdateBackground( true );\n\t\tupdateNotes();\n\n\t\tformatEmbeddedContent();\n\n\t\t// Start or stop embedded content depending on global config\n\t\tif( config.autoPlayMedia === false ) {\n\t\t\tstopEmbeddedContent( currentSlide );\n\t\t}\n\t\telse {\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\tif( isOverview() ) {\n\t\t\tlayoutOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets all vertical slides so that only the first\n\t * is visible.\n\t */\n\tfunction resetVerticalSlides() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tif( y > 0 ) {\n\t\t\t\t\tverticalSlide.classList.remove( 'present' );\n\t\t\t\t\tverticalSlide.classList.remove( 'past' );\n\t\t\t\t\tverticalSlide.classList.add( 'future' );\n\t\t\t\t\tverticalSlide.setAttribute( 'aria-hidden', 'true' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Sorts and formats all of fragments in the\n\t * presentation.\n\t */\n\tfunction sortAllFragments() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tsortFragments( verticalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t\t} );\n\n\t\t\tif( verticalSlides.length === 0 ) sortFragments( horizontalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Randomly shuffles all slides in the deck.\n\t */\n\tfunction shuffle() {\n\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\tslides.forEach( function( slide ) {\n\n\t\t\t// Insert this slide next to another random slide. This may\n\t\t\t// cause the slide to insert before itself but that's fine.\n\t\t\tdom.slides.insertBefore( slide, slides[ Math.floor( Math.random() * slides.length ) ] );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Updates one dimension of slides by showing the slide\n\t * with the specified index.\n\t *\n\t * @param {string} selector A CSS selector that will fetch\n\t * the group of slides we are working with\n\t * @param {number} index The index of the slide that should be\n\t * shown\n\t *\n\t * @return {number} The index of the slide that is now shown,\n\t * might differ from the passed in index if it was out of\n\t * bounds.\n\t */\n\tfunction updateSlides( selector, index ) {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( selector ) ),\n\t\t\tslidesLength = slides.length;\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\tif( slidesLength ) {\n\n\t\t\t// Should the index loop?\n\t\t\tif( config.loop ) {\n\t\t\t\tindex %= slidesLength;\n\n\t\t\t\tif( index < 0 ) {\n\t\t\t\t\tindex = slidesLength + index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Enforce max and minimum index bounds\n\t\t\tindex = Math.max( Math.min( index, slidesLength - 1 ), 0 );\n\n\t\t\tfor( var i = 0; i < slidesLength; i++ ) {\n\t\t\t\tvar element = slides[i];\n\n\t\t\t\tvar reverse = config.rtl && !isVerticalSlide( element );\n\n\t\t\t\telement.classList.remove( 'past' );\n\t\t\t\telement.classList.remove( 'present' );\n\t\t\t\telement.classList.remove( 'future' );\n\n\t\t\t\t// http://www.w3.org/html/wg/drafts/html/master/editing.html#the-hidden-attribute\n\t\t\t\telement.setAttribute( 'hidden', '' );\n\t\t\t\telement.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t\t// If this element contains vertical slides\n\t\t\t\tif( element.querySelector( 'section' ) ) {\n\t\t\t\t\telement.classList.add( 'stack' );\n\t\t\t\t}\n\n\t\t\t\t// If we're printing static slides, all slides are \"present\"\n\t\t\t\tif( printMode ) {\n\t\t\t\t\telement.classList.add( 'present' );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif( i < index ) {\n\t\t\t\t\t// Any element previous to index is given the 'past' class\n\t\t\t\t\telement.classList.add( reverse ? 'future' : 'past' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\tvar pastFragments = toArray( element.querySelectorAll( '.fragment' ) );\n\n\t\t\t\t\t\t// Show all fragments on prior slides\n\t\t\t\t\t\twhile( pastFragments.length ) {\n\t\t\t\t\t\t\tvar pastFragment = pastFragments.pop();\n\t\t\t\t\t\t\tpastFragment.classList.add( 'visible' );\n\t\t\t\t\t\t\tpastFragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( i > index ) {\n\t\t\t\t\t// Any element subsequent to index is given the 'future' class\n\t\t\t\t\telement.classList.add( reverse ? 'past' : 'future' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\tvar futureFragments = toArray( element.querySelectorAll( '.fragment.visible' ) );\n\n\t\t\t\t\t\t// No fragments in future slides should be visible ahead of time\n\t\t\t\t\t\twhile( futureFragments.length ) {\n\t\t\t\t\t\t\tvar futureFragment = futureFragments.pop();\n\t\t\t\t\t\t\tfutureFragment.classList.remove( 'visible' );\n\t\t\t\t\t\t\tfutureFragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Mark the current slide as present\n\t\t\tslides[index].classList.add( 'present' );\n\t\t\tslides[index].removeAttribute( 'hidden' );\n\t\t\tslides[index].removeAttribute( 'aria-hidden' );\n\n\t\t\t// If this slide has a state associated with it, add it\n\t\t\t// onto the current state of the deck\n\t\t\tvar slideState = slides[index].getAttribute( 'data-state' );\n\t\t\tif( slideState ) {\n\t\t\t\tstate = state.concat( slideState.split( ' ' ) );\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\t// Since there are no slides we can't be anywhere beyond the\n\t\t\t// zeroth index\n\t\t\tindex = 0;\n\t\t}\n\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Optimization method; hide all slides that are far away\n\t * from the present slide.\n\t */\n\tfunction updateSlidesVisibility() {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ),\n\t\t\thorizontalSlidesLength = horizontalSlides.length,\n\t\t\tdistanceX,\n\t\t\tdistanceY;\n\n\t\tif( horizontalSlidesLength && typeof indexh !== 'undefined' ) {\n\n\t\t\t// The number of steps away from the present slide that will\n\t\t\t// be visible\n\t\t\tvar viewDistance = isOverview() ? 10 : config.viewDistance;\n\n\t\t\t// Limit view distance on weaker devices\n\t\t\tif( isMobileDevice ) {\n\t\t\t\tviewDistance = isOverview() ? 6 : 2;\n\t\t\t}\n\n\t\t\t// All slides need to be visible when exporting to PDF\n\t\t\tif( isPrintingPDF() ) {\n\t\t\t\tviewDistance = Number.MAX_VALUE;\n\t\t\t}\n\n\t\t\tfor( var x = 0; x < horizontalSlidesLength; x++ ) {\n\t\t\t\tvar horizontalSlide = horizontalSlides[x];\n\n\t\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) ),\n\t\t\t\t\tverticalSlidesLength = verticalSlides.length;\n\n\t\t\t\t// Determine how far away this slide is from the present\n\t\t\t\tdistanceX = Math.abs( ( indexh || 0 ) - x ) || 0;\n\n\t\t\t\t// If the presentation is looped, distance should measure\n\t\t\t\t// 1 between the first and last slides\n\t\t\t\tif( config.loop ) {\n\t\t\t\t\tdistanceX = Math.abs( ( ( indexh || 0 ) - x ) % ( horizontalSlidesLength - viewDistance ) ) || 0;\n\t\t\t\t}\n\n\t\t\t\t// Show the horizontal slide if it's within the view distance\n\t\t\t\tif( distanceX < viewDistance ) {\n\t\t\t\t\tshowSlide( horizontalSlide );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\thideSlide( horizontalSlide );\n\t\t\t\t}\n\n\t\t\t\tif( verticalSlidesLength ) {\n\n\t\t\t\t\tvar oy = getPreviousVerticalIndex( horizontalSlide );\n\n\t\t\t\t\tfor( var y = 0; y < verticalSlidesLength; y++ ) {\n\t\t\t\t\t\tvar verticalSlide = verticalSlides[y];\n\n\t\t\t\t\t\tdistanceY = x === ( indexh || 0 ) ? Math.abs( ( indexv || 0 ) - y ) : Math.abs( y - oy );\n\n\t\t\t\t\t\tif( distanceX + distanceY < viewDistance ) {\n\t\t\t\t\t\t\tshowSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\thideSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pick up notes from the current slide and display them\n\t * to the viewer.\n\t *\n\t * @see {@link config.showNotes}\n\t */\n\tfunction updateNotes() {\n\n\t\tif( config.showNotes && dom.speakerNotes && currentSlide && !isPrintingPDF() ) {\n\n\t\t\tdom.speakerNotes.innerHTML = getSlideNotes() || '';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the progress bar to reflect the current slide.\n\t */\n\tfunction updateProgress() {\n\n\t\t// Update progress if enabled\n\t\tif( config.progress && dom.progressbar ) {\n\n\t\t\tdom.progressbar.style.width = getProgress() * dom.wrapper.offsetWidth + 'px';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the slide number div to reflect the current slide.\n\t *\n\t * The following slide number formats are available:\n\t *  \"h.v\":\thorizontal . vertical slide number (default)\n\t *  \"h/v\":\thorizontal / vertical slide number\n\t *    \"c\":\tflattened slide number\n\t *  \"c/t\":\tflattened slide number / total slides\n\t */\n\tfunction updateSlideNumber() {\n\n\t\t// Update slide number if enabled\n\t\tif( config.slideNumber && dom.slideNumber ) {\n\n\t\t\tvar value = [];\n\t\t\tvar format = 'h.v';\n\n\t\t\t// Check if a custom number format is available\n\t\t\tif( typeof config.slideNumber === 'string' ) {\n\t\t\t\tformat = config.slideNumber;\n\t\t\t}\n\n\t\t\tswitch( format ) {\n\t\t\t\tcase 'c':\n\t\t\t\t\tvalue.push( getSlidePastCount() + 1 );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c/t':\n\t\t\t\t\tvalue.push( getSlidePastCount() + 1, '/', getTotalSlides() );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'h/v':\n\t\t\t\t\tvalue.push( indexh + 1 );\n\t\t\t\t\tif( isVerticalSlide() ) value.push( '/', indexv + 1 );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvalue.push( indexh + 1 );\n\t\t\t\t\tif( isVerticalSlide() ) value.push( '.', indexv + 1 );\n\t\t\t}\n\n\t\t\tdom.slideNumber.innerHTML = formatSlideNumber( value[0], value[1], value[2] );\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies HTML formatting to a slide number before it's\n\t * written to the DOM.\n\t *\n\t * @param {number} a Current slide\n\t * @param {string} delimiter Character to separate slide numbers\n\t * @param {(number|*)} b Total slides\n\t * @return {string} HTML string fragment\n\t */\n\tfunction formatSlideNumber( a, delimiter, b ) {\n\n\t\tif( typeof b === 'number' && !isNaN( b ) ) {\n\t\t\treturn  '<span class=\"slide-number-a\">'+ a +'</span>' +\n\t\t\t\t\t'<span class=\"slide-number-delimiter\">'+ delimiter +'</span>' +\n\t\t\t\t\t'<span class=\"slide-number-b\">'+ b +'</span>';\n\t\t}\n\t\telse {\n\t\t\treturn '<span class=\"slide-number-a\">'+ a +'</span>';\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the state of all control/navigation arrows.\n\t */\n\tfunction updateControls() {\n\n\t\tvar routes = availableRoutes();\n\t\tvar fragments = availableFragments();\n\n\t\t// Remove the 'enabled' class from all directions\n\t\tdom.controlsLeft.concat( dom.controlsRight )\n\t\t\t\t\t\t.concat( dom.controlsUp )\n\t\t\t\t\t\t.concat( dom.controlsDown )\n\t\t\t\t\t\t.concat( dom.controlsPrev )\n\t\t\t\t\t\t.concat( dom.controlsNext ).forEach( function( node ) {\n\t\t\tnode.classList.remove( 'enabled' );\n\t\t\tnode.classList.remove( 'fragmented' );\n\n\t\t\t// Set 'disabled' attribute on all directions\n\t\t\tnode.setAttribute( 'disabled', 'disabled' );\n\t\t} );\n\n\t\t// Add the 'enabled' class to the available routes; remove 'disabled' attribute to enable buttons\n\t\tif( routes.left ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.up ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.down ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Prev/next buttons\n\t\tif( routes.left || routes.up ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right || routes.down ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Highlight fragment directions\n\t\tif( currentSlide ) {\n\n\t\t\t// Always apply fragment decorator to prev/next buttons\n\t\t\tif( fragments.prev ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\tif( fragments.next ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t\t// Apply fragment decorators to directional buttons based on\n\t\t\t// what slide axis they are in\n\t\t\tif( isVerticalSlide( currentSlide ) ) {\n\t\t\t\tif( fragments.prev ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( fragments.prev ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the background elements to reflect the current\n\t * slide.\n\t *\n\t * @param {boolean} includeAll If true, the backgrounds of\n\t * all vertical slides (not just the present) will be updated.\n\t */\n\tfunction updateBackground( includeAll ) {\n\n\t\tvar currentBackground = null;\n\n\t\t// Reverse past/future classes when in RTL mode\n\t\tvar horizontalPast = config.rtl ? 'future' : 'past',\n\t\t\thorizontalFuture = config.rtl ? 'past' : 'future';\n\n\t\t// Update the classes of all backgrounds to match the\n\t\t// states of their slides (past/present/future)\n\t\ttoArray( dom.background.childNodes ).forEach( function( backgroundh, h ) {\n\n\t\t\tbackgroundh.classList.remove( 'past' );\n\t\t\tbackgroundh.classList.remove( 'present' );\n\t\t\tbackgroundh.classList.remove( 'future' );\n\n\t\t\tif( h < indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalPast );\n\t\t\t}\n\t\t\telse if ( h > indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalFuture );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundh.classList.add( 'present' );\n\n\t\t\t\t// Store a reference to the current background element\n\t\t\t\tcurrentBackground = backgroundh;\n\t\t\t}\n\n\t\t\tif( includeAll || h === indexh ) {\n\t\t\t\ttoArray( backgroundh.querySelectorAll( '.slide-background' ) ).forEach( function( backgroundv, v ) {\n\n\t\t\t\t\tbackgroundv.classList.remove( 'past' );\n\t\t\t\t\tbackgroundv.classList.remove( 'present' );\n\t\t\t\t\tbackgroundv.classList.remove( 'future' );\n\n\t\t\t\t\tif( v < indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'past' );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( v > indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'future' );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tbackgroundv.classList.add( 'present' );\n\n\t\t\t\t\t\t// Only if this is the present horizontal and vertical slide\n\t\t\t\t\t\tif( h === indexh ) currentBackground = backgroundv;\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\n\t\t// Stop content inside of previous backgrounds\n\t\tif( previousBackground ) {\n\n\t\t\tstopEmbeddedContent( previousBackground );\n\n\t\t}\n\n\t\t// Start content in the current background\n\t\tif( currentBackground ) {\n\n\t\t\tstartEmbeddedContent( currentBackground );\n\n\t\t\tvar backgroundImageURL = currentBackground.style.backgroundImage || '';\n\n\t\t\t// Restart GIFs (doesn't work in Firefox)\n\t\t\tif( /\\.gif/i.test( backgroundImageURL ) ) {\n\t\t\t\tcurrentBackground.style.backgroundImage = '';\n\t\t\t\twindow.getComputedStyle( currentBackground ).opacity;\n\t\t\t\tcurrentBackground.style.backgroundImage = backgroundImageURL;\n\t\t\t}\n\n\t\t\t// Don't transition between identical backgrounds. This\n\t\t\t// prevents unwanted flicker.\n\t\t\tvar previousBackgroundHash = previousBackground ? previousBackground.getAttribute( 'data-background-hash' ) : null;\n\t\t\tvar currentBackgroundHash = currentBackground.getAttribute( 'data-background-hash' );\n\t\t\tif( currentBackgroundHash && currentBackgroundHash === previousBackgroundHash && currentBackground !== previousBackground ) {\n\t\t\t\tdom.background.classList.add( 'no-transition' );\n\t\t\t}\n\n\t\t\tpreviousBackground = currentBackground;\n\n\t\t}\n\n\t\t// If there's a background brightness flag for this slide,\n\t\t// bubble it to the .reveal container\n\t\tif( currentSlide ) {\n\t\t\t[ 'has-light-background', 'has-dark-background' ].forEach( function( classToBubble ) {\n\t\t\t\tif( currentSlide.classList.contains( classToBubble ) ) {\n\t\t\t\t\tdom.wrapper.classList.add( classToBubble );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.wrapper.classList.remove( classToBubble );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Allow the first background to apply without transition\n\t\tsetTimeout( function() {\n\t\t\tdom.background.classList.remove( 'no-transition' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Updates the position of the parallax background based\n\t * on the current slide index.\n\t */\n\tfunction updateParallax() {\n\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\t\tvar backgroundSize = dom.background.style.backgroundSize.split( ' ' ),\n\t\t\t\tbackgroundWidth, backgroundHeight;\n\n\t\t\tif( backgroundSize.length === 1 ) {\n\t\t\t\tbackgroundWidth = backgroundHeight = parseInt( backgroundSize[0], 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundWidth = parseInt( backgroundSize[0], 10 );\n\t\t\t\tbackgroundHeight = parseInt( backgroundSize[1], 10 );\n\t\t\t}\n\n\t\t\tvar slideWidth = dom.background.offsetWidth,\n\t\t\t\thorizontalSlideCount = horizontalSlides.length,\n\t\t\t\thorizontalOffsetMultiplier,\n\t\t\t\thorizontalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundHorizontal === 'number' ) {\n\t\t\t\thorizontalOffsetMultiplier = config.parallaxBackgroundHorizontal;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thorizontalOffsetMultiplier = horizontalSlideCount > 1 ? ( backgroundWidth - slideWidth ) / ( horizontalSlideCount-1 ) : 0;\n\t\t\t}\n\n\t\t\thorizontalOffset = horizontalOffsetMultiplier * indexh * -1;\n\n\t\t\tvar slideHeight = dom.background.offsetHeight,\n\t\t\t\tverticalSlideCount = verticalSlides.length,\n\t\t\t\tverticalOffsetMultiplier,\n\t\t\t\tverticalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundVertical === 'number' ) {\n\t\t\t\tverticalOffsetMultiplier = config.parallaxBackgroundVertical;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tverticalOffsetMultiplier = ( backgroundHeight - slideHeight ) / ( verticalSlideCount-1 );\n\t\t\t}\n\n\t\t\tverticalOffset = verticalSlideCount > 0 ?  verticalOffsetMultiplier * indexv : 0;\n\n\t\t\tdom.background.style.backgroundPosition = horizontalOffset + 'px ' + -verticalOffset + 'px';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Called when the given slide is within the configured view\n\t * distance. Shows the slide element and loads any content\n\t * that is set to load lazily (data-src).\n\t *\n\t * @param {HTMLElement} slide Slide to show\n\t */\n\t/**\n\t * Called when the given slide is within the configured view\n\t * distance. Shows the slide element and loads any content\n\t * that is set to load lazily (data-src).\n\t *\n\t * @param {HTMLElement} slide Slide to show\n\t */\n\tfunction showSlide( slide ) {\n\n\t\t// Show the slide element\n\t\tslide.style.display = config.display;\n\n\t\t// Media elements with data-src attributes\n\t\ttoArray( slide.querySelectorAll( 'img[data-src], video[data-src], audio[data-src]' ) ).forEach( function( element ) {\n\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\telement.removeAttribute( 'data-src' );\n\t\t} );\n\n\t\t// Media elements with <source> children\n\t\ttoArray( slide.querySelectorAll( 'video, audio' ) ).forEach( function( media ) {\n\t\t\tvar sources = 0;\n\n\t\t\ttoArray( media.querySelectorAll( 'source[data-src]' ) ).forEach( function( source ) {\n\t\t\t\tsource.setAttribute( 'src', source.getAttribute( 'data-src' ) );\n\t\t\t\tsource.removeAttribute( 'data-src' );\n\t\t\t\tsources += 1;\n\t\t\t} );\n\n\t\t\t// If we rewrote sources for this video/audio element, we need\n\t\t\t// to manually tell it to load from its new origin\n\t\t\tif( sources > 0 ) {\n\t\t\t\tmedia.load();\n\t\t\t}\n\t\t} );\n\n\n\t\t// Show the corresponding background element\n\t\tvar indices = getIndices( slide );\n\t\tvar background = getSlideBackground( indices.h, indices.v );\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'block';\n\n\t\t\t// If the background contains media, load it\n\t\t\tif( background.hasAttribute( 'data-loaded' ) === false ) {\n\t\t\t\tbackground.setAttribute( 'data-loaded', 'true' );\n\n\t\t\t\tvar backgroundImage = slide.getAttribute( 'data-background-image' ),\n\t\t\t\t\tbackgroundVideo = slide.getAttribute( 'data-background-video' ),\n\t\t\t\t\tbackgroundVideoLoop = slide.hasAttribute( 'data-background-video-loop' ),\n\t\t\t\t\tbackgroundVideoMuted = slide.hasAttribute( 'data-background-video-muted' ),\n\t\t\t\t\tbackgroundIframe = slide.getAttribute( 'data-background-iframe' );\n\n\t\t\t\t// Images\n\t\t\t\tif( backgroundImage ) {\n\t\t\t\t\tbackground.style.backgroundImage = 'url('+ backgroundImage +')';\n\t\t\t\t}\n\t\t\t\t// Videos\n\t\t\t\telse if ( backgroundVideo && !isSpeakerNotes() ) {\n\t\t\t\t\tvar video = document.createElement( 'video' );\n\n\t\t\t\t\tif( backgroundVideoLoop ) {\n\t\t\t\t\t\tvideo.setAttribute( 'loop', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif( backgroundVideoMuted ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Inline video playback works (at least in Mobile Safari) as\n\t\t\t\t\t// long as the video is muted and the `playsinline` attribute is\n\t\t\t\t\t// present\n\t\t\t\t\tif( isMobileDevice ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t\tvideo.autoplay = true;\n\t\t\t\t\t\tvideo.setAttribute( 'playsinline', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support comma separated lists of video sources\n\t\t\t\t\tbackgroundVideo.split( ',' ).forEach( function( source ) {\n\t\t\t\t\t\tvideo.innerHTML += '<source src=\"'+ source +'\">';\n\t\t\t\t\t} );\n\n\t\t\t\t\tbackground.appendChild( video );\n\t\t\t\t}\n\t\t\t\t// Iframes\n\t\t\t\telse if( backgroundIframe ) {\n\t\t\t\t\tvar iframe = document.createElement( 'iframe' );\n\t\t\t\t\tiframe.setAttribute( 'allowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'mozallowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'webkitallowfullscreen', '' );\n\n\t\t\t\t\t// Only load autoplaying content when the slide is shown to\n\t\t\t\t\t// avoid having it play in the background\n\t\t\t\t\tif( /autoplay=(1|true|yes)/gi.test( backgroundIframe ) ) {\n\t\t\t\t\t\tiframe.setAttribute( 'data-src', backgroundIframe );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tiframe.setAttribute( 'src', backgroundIframe );\n\t\t\t\t\t}\n\n\t\t\t\t\tiframe.style.width  = '100%';\n\t\t\t\t\tiframe.style.height = '100%';\n\t\t\t\t\tiframe.style.maxHeight = '100%';\n\t\t\t\t\tiframe.style.maxWidth = '100%';\n\n\t\t\t\t\tbackground.appendChild( iframe );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Called when the given slide is moved outside of the\n\t * configured view distance.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction hideSlide( slide ) {\n\n\t\t// Hide the slide element\n\t\tslide.style.display = 'none';\n\n\t\t// Hide the corresponding background element\n\t\tvar indices = getIndices( slide );\n\t\tvar background = getSlideBackground( indices.h, indices.v );\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'none';\n\t\t}\n\n\t}\n\n\t/**\n\t * Determine what available routes there are for navigation.\n\t *\n\t * @return {{left: boolean, right: boolean, up: boolean, down: boolean}}\n\t */\n\tfunction availableRoutes() {\n\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\tvar routes = {\n\t\t\tleft: indexh > 0 || config.loop,\n\t\t\tright: indexh < horizontalSlides.length - 1 || config.loop,\n\t\t\tup: indexv > 0,\n\t\t\tdown: indexv < verticalSlides.length - 1\n\t\t};\n\n\t\t// reverse horizontal controls for rtl\n\t\tif( config.rtl ) {\n\t\t\tvar left = routes.left;\n\t\t\troutes.left = routes.right;\n\t\t\troutes.right = left;\n\t\t}\n\n\t\treturn routes;\n\n\t}\n\n\t/**\n\t * Returns an object describing the available fragment\n\t * directions.\n\t *\n\t * @return {{prev: boolean, next: boolean}}\n\t */\n\tfunction availableFragments() {\n\n\t\tif( currentSlide && config.fragments ) {\n\t\t\tvar fragments = currentSlide.querySelectorAll( '.fragment' );\n\t\t\tvar hiddenFragments = currentSlide.querySelectorAll( '.fragment:not(.visible)' );\n\n\t\t\treturn {\n\t\t\t\tprev: fragments.length - hiddenFragments.length > 0,\n\t\t\t\tnext: !!hiddenFragments.length\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn { prev: false, next: false };\n\t\t}\n\n\t}\n\n\t/**\n\t * Enforces origin-specific format rules for embedded media.\n\t */\n\tfunction formatEmbeddedContent() {\n\n\t\tvar _appendParamToIframeSource = function( sourceAttribute, sourceURL, param ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( 'iframe['+ sourceAttribute +'*=\"'+ sourceURL +'\"]' ) ).forEach( function( el ) {\n\t\t\t\tvar src = el.getAttribute( sourceAttribute );\n\t\t\t\tif( src && src.indexOf( param ) === -1 ) {\n\t\t\t\t\tel.setAttribute( sourceAttribute, src + ( !/\\?/.test( src ) ? '?' : '&' ) + param );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// YouTube frames must include \"?enablejsapi=1\"\n\t\t_appendParamToIframeSource( 'src', 'youtube.com/embed/', 'enablejsapi=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'youtube.com/embed/', 'enablejsapi=1' );\n\n\t\t// Vimeo frames must include \"?api=1\"\n\t\t_appendParamToIframeSource( 'src', 'player.vimeo.com/', 'api=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'player.vimeo.com/', 'api=1' );\n\n\t}\n\n\t/**\n\t * Start playback of any embedded content inside of\n\t * the given element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction startEmbeddedContent( element ) {\n\n\t\tif( element && !isSpeakerNotes() ) {\n\n\t\t\t// Restart GIFs\n\t\t\ttoArray( element.querySelectorAll( 'img[src$=\".gif\"]' ) ).forEach( function( el ) {\n\t\t\t\t// Setting the same unchanged source like this was confirmed\n\t\t\t\t// to work in Chrome, FF & Safari\n\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'src' ) );\n\t\t\t} );\n\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = el.hasAttribute( 'data-autoplay' ) || !!closestParent( el, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\tif( autoplay && typeof el.play === 'function' ) {\n\n\t\t\t\t\tif( el.readyState > 1 ) {\n\t\t\t\t\t\tstartEmbeddedMedia( { target: el } );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tel.removeEventListener( 'loadeddata', startEmbeddedMedia ); // remove first to avoid dupes\n\t\t\t\t\t\tel.addEventListener( 'loadeddata', startEmbeddedMedia );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Normal iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartEmbeddedIframe( { target: el } );\n\t\t\t} );\n\n\t\t\t// Lazy loading iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif( el.getAttribute( 'src' ) !== el.getAttribute( 'data-src' ) ) {\n\t\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe ); // remove first to avoid dupes\n\t\t\t\t\tel.addEventListener( 'load', startEmbeddedIframe );\n\t\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'data-src' ) );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Starts playing an embedded video/audio element after\n\t * it has finished loading.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedMedia( event ) {\n\n\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\tif( isAttachedToDOM && isVisible ) {\n\t\t\tevent.target.currentTime = 0;\n\t\t\tevent.target.play();\n\t\t}\n\n\t\tevent.target.removeEventListener( 'loadeddata', startEmbeddedMedia );\n\n\t}\n\n\t/**\n\t * \"Starts\" the content of an embedded iframe using the\n\t * postMessage API.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedIframe( event ) {\n\n\t\tvar iframe = event.target;\n\n\t\tif( iframe && iframe.contentWindow ) {\n\n\t\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\t\tif( isAttachedToDOM && isVisible ) {\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = iframe.hasAttribute( 'data-autoplay' ) || !!closestParent( iframe, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\t// YouTube postMessage API\n\t\t\t\tif( /youtube\\.com\\/embed\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Vimeo postMessage API\n\t\t\t\telse if( /player\\.vimeo\\.com\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"method\":\"play\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Generic postMessage API\n\t\t\t\telse {\n\t\t\t\t\tiframe.contentWindow.postMessage( 'slide:start', '*' );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Stop playback of any embedded content inside of\n\t * the targeted slide.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction stopEmbeddedContent( element ) {\n\n\t\tif( element && element.parentNode ) {\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && typeof el.pause === 'function' ) {\n\t\t\t\t\tel.setAttribute('data-paused-by-reveal', '');\n\t\t\t\t\tel.pause();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Generic postMessage API for non-lazy loaded iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe' ) ).forEach( function( el ) {\n\t\t\t\tif( el.contentWindow ) el.contentWindow.postMessage( 'slide:stop', '*' );\n\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe );\n\t\t\t});\n\n\t\t\t// YouTube postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"youtube.com/embed/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Vimeo postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"player.vimeo.com/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"method\":\"pause\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Lazy loading iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\t// Only removing the src doesn't actually unload the frame\n\t\t\t\t// in all browsers (Firefox) so we set it to blank first\n\t\t\t\tel.setAttribute( 'src', 'about:blank' );\n\t\t\t\tel.removeAttribute( 'src' );\n\t\t\t} );\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the number of past slides. This can be used as a global\n\t * flattened index for slides.\n\t *\n\t * @return {number} Past slide count\n\t */\n\tfunction getSlidePastCount() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t// The number of past slides\n\t\tvar pastCount = 0;\n\n\t\t// Step through all slides and count the past ones\n\t\tmainLoop: for( var i = 0; i < horizontalSlides.length; i++ ) {\n\n\t\t\tvar horizontalSlide = horizontalSlides[i];\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\n\t\t\tfor( var j = 0; j < verticalSlides.length; j++ ) {\n\n\t\t\t\t// Stop as soon as we arrive at the present\n\t\t\t\tif( verticalSlides[j].classList.contains( 'present' ) ) {\n\t\t\t\t\tbreak mainLoop;\n\t\t\t\t}\n\n\t\t\t\tpastCount++;\n\n\t\t\t}\n\n\t\t\t// Stop as soon as we arrive at the present\n\t\t\tif( horizontalSlide.classList.contains( 'present' ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Don't count the wrapping section for vertical slides\n\t\t\tif( horizontalSlide.classList.contains( 'stack' ) === false ) {\n\t\t\t\tpastCount++;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pastCount;\n\n\t}\n\n\t/**\n\t * Returns a value ranging from 0-1 that represents\n\t * how far into the presentation we have navigated.\n\t *\n\t * @return {number}\n\t */\n\tfunction getProgress() {\n\n\t\t// The number of past and total slides\n\t\tvar totalCount = getTotalSlides();\n\t\tvar pastCount = getSlidePastCount();\n\n\t\tif( currentSlide ) {\n\n\t\t\tvar allFragments = currentSlide.querySelectorAll( '.fragment' );\n\n\t\t\t// If there are fragments in the current slide those should be\n\t\t\t// accounted for in the progress.\n\t\t\tif( allFragments.length > 0 ) {\n\t\t\t\tvar visibleFragments = currentSlide.querySelectorAll( '.fragment.visible' );\n\n\t\t\t\t// This value represents how big a portion of the slide progress\n\t\t\t\t// that is made up by its fragments (0-1)\n\t\t\t\tvar fragmentWeight = 0.9;\n\n\t\t\t\t// Add fragment progress to the past slide count\n\t\t\t\tpastCount += ( visibleFragments.length / allFragments.length ) * fragmentWeight;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pastCount / ( totalCount - 1 );\n\n\t}\n\n\t/**\n\t * Checks if this presentation is running inside of the\n\t * speaker notes window.\n\t *\n\t * @return {boolean}\n\t */\n\tfunction isSpeakerNotes() {\n\n\t\treturn !!window.location.search.match( /receiver/gi );\n\n\t}\n\n\t/**\n\t * Reads the current URL (hash) and navigates accordingly.\n\t */\n\tfunction readURL() {\n\n\t\tvar hash = window.location.hash;\n\n\t\t// Attempt to parse the hash as either an index or name\n\t\tvar bits = hash.slice( 2 ).split( '/' ),\n\t\t\tname = hash.replace( /#|\\//gi, '' );\n\n\t\t// If the first bit is invalid and there is a name we can\n\t\t// assume that this is a named link\n\t\tif( isNaN( parseInt( bits[0], 10 ) ) && name.length ) {\n\t\t\tvar element;\n\n\t\t\t// Ensure the named link is a valid HTML ID attribute\n\t\t\tif( /^[a-zA-Z][\\w:.-]*$/.test( name ) ) {\n\t\t\t\t// Find the slide with the specified ID\n\t\t\t\telement = document.getElementById( name );\n\t\t\t}\n\n\t\t\tif( element ) {\n\t\t\t\t// Find the position of the named slide and navigate to it\n\t\t\t\tvar indices = Reveal.getIndices( element );\n\t\t\t\tslide( indices.h, indices.v );\n\t\t\t}\n\t\t\t// If the slide doesn't exist, navigate to the current slide\n\t\t\telse {\n\t\t\t\tslide( indexh || 0, indexv || 0 );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Read the index components of the hash\n\t\t\tvar h = parseInt( bits[0], 10 ) || 0,\n\t\t\t\tv = parseInt( bits[1], 10 ) || 0;\n\n\t\t\tif( h !== indexh || v !== indexv ) {\n\t\t\t\tslide( h, v );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the page URL (hash) to reflect the current\n\t * state.\n\t *\n\t * @param {number} delay The time in ms to wait before\n\t * writing the hash\n\t */\n\tfunction writeURL( delay ) {\n\n\t\tif( config.history ) {\n\n\t\t\t// Make sure there's never more than one timeout running\n\t\t\tclearTimeout( writeURLTimeout );\n\n\t\t\t// If a delay is specified, timeout this call\n\t\t\tif( typeof delay === 'number' ) {\n\t\t\t\twriteURLTimeout = setTimeout( writeURL, delay );\n\t\t\t}\n\t\t\telse if( currentSlide ) {\n\t\t\t\tvar url = '/';\n\n\t\t\t\t// Attempt to create a named link based on the slide's ID\n\t\t\t\tvar id = currentSlide.getAttribute( 'id' );\n\t\t\t\tif( id ) {\n\t\t\t\t\tid = id.replace( /[^a-zA-Z0-9\\-\\_\\:\\.]/g, '' );\n\t\t\t\t}\n\n\t\t\t\t// If the current slide has an ID, use that as a named link\n\t\t\t\tif( typeof id === 'string' && id.length ) {\n\t\t\t\t\turl = '/' + id;\n\t\t\t\t}\n\t\t\t\t// Otherwise use the /h/v index\n\t\t\t\telse {\n\t\t\t\t\tif( indexh > 0 || indexv > 0 ) url += indexh;\n\t\t\t\t\tif( indexv > 0 ) url += '/' + indexv;\n\t\t\t\t}\n\n\t\t\t\twindow.location.hash = url;\n\t\t\t}\n\t\t}\n\n\t}\n\t/**\n\t * Retrieves the h/v location and fragment of the current,\n\t * or specified, slide.\n\t *\n\t * @param {HTMLElement} [slide] If specified, the returned\n\t * index will be for this slide rather than the currently\n\t * active one\n\t *\n\t * @return {{h: number, v: number, f: number}}\n\t */\n\tfunction getIndices( slide ) {\n\n\t\t// By default, return the current indices\n\t\tvar h = indexh,\n\t\t\tv = indexv,\n\t\t\tf;\n\n\t\t// If a slide is specified, return the indices of that slide\n\t\tif( slide ) {\n\t\t\tvar isVertical = isVerticalSlide( slide );\n\t\t\tvar slideh = isVertical ? slide.parentNode : slide;\n\n\t\t\t// Select all horizontal slides\n\t\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t\t// Now that we know which the horizontal slide is, get its index\n\t\t\th = Math.max( horizontalSlides.indexOf( slideh ), 0 );\n\n\t\t\t// Assume we're not vertical\n\t\t\tv = undefined;\n\n\t\t\t// If this is a vertical slide, grab the vertical index\n\t\t\tif( isVertical ) {\n\t\t\t\tv = Math.max( toArray( slide.parentNode.querySelectorAll( 'section' ) ).indexOf( slide ), 0 );\n\t\t\t}\n\t\t}\n\n\t\tif( !slide && currentSlide ) {\n\t\t\tvar hasFragments = currentSlide.querySelectorAll( '.fragment' ).length > 0;\n\t\t\tif( hasFragments ) {\n\t\t\t\tvar currentFragment = currentSlide.querySelector( '.current-fragment' );\n\t\t\t\tif( currentFragment && currentFragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\tf = parseInt( currentFragment.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf = currentSlide.querySelectorAll( '.fragment.visible' ).length - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { h: h, v: v, f: f };\n\n\t}\n\n\t/**\n\t * Retrieves all slides in this presentation.\n\t */\n\tfunction getSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ':not(.stack)' ));\n\n\t}\n\n\t/**\n\t * Retrieves the total number of slides in this presentation.\n\t *\n\t * @return {number}\n\t */\n\tfunction getTotalSlides() {\n\n\t\treturn getSlides().length;\n\n\t}\n\n\t/**\n\t * Returns the slide element matching the specified index.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction getSlide( x, y ) {\n\n\t\tvar horizontalSlide = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR )[ x ];\n\t\tvar verticalSlides = horizontalSlide && horizontalSlide.querySelectorAll( 'section' );\n\n\t\tif( verticalSlides && verticalSlides.length && typeof y === 'number' ) {\n\t\t\treturn verticalSlides ? verticalSlides[ y ] : undefined;\n\t\t}\n\n\t\treturn horizontalSlide;\n\n\t}\n\n\t/**\n\t * Returns the background element for the given slide.\n\t * All slides, even the ones with no background properties\n\t * defined, have a background element so as long as the\n\t * index is valid an element will be returned.\n\t *\n\t * @param {number} x Horizontal background index\n\t * @param {number} y Vertical background index\n\t * @return {(HTMLElement[]|*)}\n\t */\n\tfunction getSlideBackground( x, y ) {\n\n\t\t// When printing to PDF the slide backgrounds are nested\n\t\t// inside of the slides\n\t\tif( isPrintingPDF() ) {\n\t\t\tvar slide = getSlide( x, y );\n\t\t\tif( slide ) {\n\t\t\t\treturn slide.slideBackgroundElement;\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar horizontalBackground = dom.wrapper.querySelectorAll( '.backgrounds>.slide-background' )[ x ];\n\t\tvar verticalBackgrounds = horizontalBackground && horizontalBackground.querySelectorAll( '.slide-background' );\n\n\t\tif( verticalBackgrounds && verticalBackgrounds.length && typeof y === 'number' ) {\n\t\t\treturn verticalBackgrounds ? verticalBackgrounds[ y ] : undefined;\n\t\t}\n\n\t\treturn horizontalBackground;\n\n\t}\n\n\t/**\n\t * Retrieves the speaker notes from a slide. Notes can be\n\t * defined in two ways:\n\t * 1. As a data-notes attribute on the slide <section>\n\t * 2. As an <aside class=\"notes\"> inside of the slide\n\t *\n\t * @param {HTMLElement} [slide=currentSlide]\n\t * @return {(string|null)}\n\t */\n\tfunction getSlideNotes( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\t// Notes can be specified via the data-notes attribute...\n\t\tif( slide.hasAttribute( 'data-notes' ) ) {\n\t\t\treturn slide.getAttribute( 'data-notes' );\n\t\t}\n\n\t\t// ... or using an <aside class=\"notes\"> element\n\t\tvar notesElement = slide.querySelector( 'aside.notes' );\n\t\tif( notesElement ) {\n\t\t\treturn notesElement.innerHTML;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Retrieves the current state of the presentation as\n\t * an object. This state can then be restored at any\n\t * time.\n\t *\n\t * @return {{indexh: number, indexv: number, indexf: number, paused: boolean, overview: boolean}}\n\t */\n\tfunction getState() {\n\n\t\tvar indices = getIndices();\n\n\t\treturn {\n\t\t\tindexh: indices.h,\n\t\t\tindexv: indices.v,\n\t\t\tindexf: indices.f,\n\t\t\tpaused: isPaused(),\n\t\t\toverview: isOverview()\n\t\t};\n\n\t}\n\n\t/**\n\t * Restores the presentation to the given state.\n\t *\n\t * @param {object} state As generated by getState()\n\t * @see {@link getState} generates the parameter `state`\n\t */\n\tfunction setState( state ) {\n\n\t\tif( typeof state === 'object' ) {\n\t\t\tslide( deserialize( state.indexh ), deserialize( state.indexv ), deserialize( state.indexf ) );\n\n\t\t\tvar pausedFlag = deserialize( state.paused ),\n\t\t\t\toverviewFlag = deserialize( state.overview );\n\n\t\t\tif( typeof pausedFlag === 'boolean' && pausedFlag !== isPaused() ) {\n\t\t\t\ttogglePause( pausedFlag );\n\t\t\t}\n\n\t\t\tif( typeof overviewFlag === 'boolean' && overviewFlag !== isOverview() ) {\n\t\t\t\ttoggleOverview( overviewFlag );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Return a sorted fragments list, ordered by an increasing\n\t * \"data-fragment-index\" attribute.\n\t *\n\t * Fragments will be revealed in the order that they are returned by\n\t * this function, so you can use the index attributes to control the\n\t * order of fragment appearance.\n\t *\n\t * To maintain a sensible default fragment order, fragments are presumed\n\t * to be passed in document order. This function adds a \"fragment-index\"\n\t * attribute to each node if such an attribute is not already present,\n\t * and sets that attribute to an integer value which is the position of\n\t * the fragment within the fragments list.\n\t *\n\t * @param {object[]|*} fragments\n\t * @return {object[]} sorted Sorted array of fragments\n\t */\n\tfunction sortFragments( fragments ) {\n\n\t\tfragments = toArray( fragments );\n\n\t\tvar ordered = [],\n\t\t\tunordered = [],\n\t\t\tsorted = [];\n\n\t\t// Group ordered and unordered elements\n\t\tfragments.forEach( function( fragment, i ) {\n\t\t\tif( fragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\tvar index = parseInt( fragment.getAttribute( 'data-fragment-index' ), 10 );\n\n\t\t\t\tif( !ordered[index] ) {\n\t\t\t\t\tordered[index] = [];\n\t\t\t\t}\n\n\t\t\t\tordered[index].push( fragment );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tunordered.push( [ fragment ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Append fragments without explicit indices in their\n\t\t// DOM order\n\t\tordered = ordered.concat( unordered );\n\n\t\t// Manually count the index up per group to ensure there\n\t\t// are no gaps\n\t\tvar index = 0;\n\n\t\t// Push all fragments in their sorted order to an array,\n\t\t// this flattens the groups\n\t\tordered.forEach( function( group ) {\n\t\t\tgroup.forEach( function( fragment ) {\n\t\t\t\tsorted.push( fragment );\n\t\t\t\tfragment.setAttribute( 'data-fragment-index', index );\n\t\t\t} );\n\n\t\t\tindex ++;\n\t\t} );\n\n\t\treturn sorted;\n\n\t}\n\n\t/**\n\t * Navigate to the specified slide fragment.\n\t *\n\t * @param {?number} index The index of the fragment that\n\t * should be shown, -1 means all are invisible\n\t * @param {number} offset Integer offset to apply to the\n\t * fragment index\n\t *\n\t * @return {boolean} true if a change was made in any\n\t * fragments visibility as part of this call\n\t */\n\tfunction navigateFragment( index, offset ) {\n\n\t\tif( currentSlide && config.fragments ) {\n\n\t\t\tvar fragments = sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\n\t\t\tif( fragments.length ) {\n\n\t\t\t\t// If no index is specified, find the current\n\t\t\t\tif( typeof index !== 'number' ) {\n\t\t\t\t\tvar lastVisibleFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\n\n\t\t\t\t\tif( lastVisibleFragment ) {\n\t\t\t\t\t\tindex = parseInt( lastVisibleFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If an offset is specified, apply it to the index\n\t\t\t\tif( typeof offset === 'number' ) {\n\t\t\t\t\tindex += offset;\n\t\t\t\t}\n\n\t\t\t\tvar fragmentsShown = [],\n\t\t\t\t\tfragmentsHidden = [];\n\n\t\t\t\ttoArray( fragments ).forEach( function( element, i ) {\n\n\t\t\t\t\tif( element.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\t\ti = parseInt( element.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Visible fragments\n\t\t\t\t\tif( i <= index ) {\n\t\t\t\t\t\tif( !element.classList.contains( 'visible' ) ) fragmentsShown.push( element );\n\t\t\t\t\t\telement.classList.add( 'visible' );\n\t\t\t\t\t\telement.classList.remove( 'current-fragment' );\n\n\t\t\t\t\t\t// Announce the fragments one by one to the Screen Reader\n\t\t\t\t\t\tdom.statusDiv.textContent = getStatusText( element );\n\n\t\t\t\t\t\tif( i === index ) {\n\t\t\t\t\t\t\telement.classList.add( 'current-fragment' );\n\t\t\t\t\t\t\tstartEmbeddedContent( element );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Hidden fragments\n\t\t\t\t\telse {\n\t\t\t\t\t\tif( element.classList.contains( 'visible' ) ) fragmentsHidden.push( element );\n\t\t\t\t\t\telement.classList.remove( 'visible' );\n\t\t\t\t\t\telement.classList.remove( 'current-fragment' );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tif( fragmentsHidden.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmenthidden', { fragment: fragmentsHidden[0], fragments: fragmentsHidden } );\n\t\t\t\t}\n\n\t\t\t\tif( fragmentsShown.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmentshown', { fragment: fragmentsShown[0], fragments: fragmentsShown } );\n\t\t\t\t}\n\n\t\t\t\tupdateControls();\n\t\t\t\tupdateProgress();\n\n\t\t\t\treturn !!( fragmentsShown.length || fragmentsHidden.length );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Navigate to the next slide fragment.\n\t *\n\t * @return {boolean} true if there was a next fragment,\n\t * false otherwise\n\t */\n\tfunction nextFragment() {\n\n\t\treturn navigateFragment( null, 1 );\n\n\t}\n\n\t/**\n\t * Navigate to the previous slide fragment.\n\t *\n\t * @return {boolean} true if there was a previous fragment,\n\t * false otherwise\n\t */\n\tfunction previousFragment() {\n\n\t\treturn navigateFragment( null, -1 );\n\n\t}\n\n\t/**\n\t * Cues a new automated slide if enabled in the config.\n\t */\n\tfunction cueAutoSlide() {\n\n\t\tcancelAutoSlide();\n\n\t\tif( currentSlide ) {\n\n\t\t\tvar fragment = currentSlide.querySelector( '.current-fragment' );\n\n\t\t\t// When the slide first appears there is no \"current\" fragment so\n\t\t\t// we look for a data-autoslide timing on the first fragment\n\t\t\tif( !fragment ) fragment = currentSlide.querySelector( '.fragment' );\n\n\t\t\tvar fragmentAutoSlide = fragment ? fragment.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar parentAutoSlide = currentSlide.parentNode ? currentSlide.parentNode.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar slideAutoSlide = currentSlide.getAttribute( 'data-autoslide' );\n\n\t\t\t// Pick value in the following priority order:\n\t\t\t// 1. Current fragment's data-autoslide\n\t\t\t// 2. Current slide's data-autoslide\n\t\t\t// 3. Parent slide's data-autoslide\n\t\t\t// 4. Global autoSlide setting\n\t\t\tif( fragmentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( fragmentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( slideAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( slideAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( parentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( parentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tautoSlide = config.autoSlide;\n\t\t\t}\n\n\t\t\t// If there are media elements with data-autoplay,\n\t\t\t// automatically set the autoSlide duration to the\n\t\t\t// length of that media. Not applicable if the slide\n\t\t\t// is divided up into fragments.\n\t\t\t// playbackRate is accounted for in the duration.\n\t\t\tif( currentSlide.querySelectorAll( '.fragment' ).length === 0 ) {\n\t\t\t\ttoArray( currentSlide.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\t\tif( el.hasAttribute( 'data-autoplay' ) ) {\n\t\t\t\t\t\tif( autoSlide && (el.duration * 1000 / el.playbackRate ) > autoSlide ) {\n\t\t\t\t\t\t\tautoSlide = ( el.duration * 1000 / el.playbackRate ) + 1000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Cue the next auto-slide if:\n\t\t\t// - There is an autoSlide value\n\t\t\t// - Auto-sliding isn't paused by the user\n\t\t\t// - The presentation isn't paused\n\t\t\t// - The overview isn't active\n\t\t\t// - The presentation isn't over\n\t\t\tif( autoSlide && !autoSlidePaused && !isPaused() && !isOverview() && ( !Reveal.isLastSlide() || availableFragments().next || config.loop === true ) ) {\n\t\t\t\tautoSlideTimeout = setTimeout( function() {\n\t\t\t\t\ttypeof config.autoSlideMethod === 'function' ? config.autoSlideMethod() : navigateNext();\n\t\t\t\t\tcueAutoSlide();\n\t\t\t\t}, autoSlide );\n\t\t\t\tautoSlideStartTime = Date.now();\n\t\t\t}\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( autoSlideTimeout !== -1 );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Cancels any ongoing request to auto-slide.\n\t */\n\tfunction cancelAutoSlide() {\n\n\t\tclearTimeout( autoSlideTimeout );\n\t\tautoSlideTimeout = -1;\n\n\t}\n\n\tfunction pauseAutoSlide() {\n\n\t\tif( autoSlide && !autoSlidePaused ) {\n\t\t\tautoSlidePaused = true;\n\t\t\tdispatchEvent( 'autoslidepaused' );\n\t\t\tclearTimeout( autoSlideTimeout );\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( false );\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction resumeAutoSlide() {\n\n\t\tif( autoSlide && autoSlidePaused ) {\n\t\t\tautoSlidePaused = false;\n\t\t\tdispatchEvent( 'autoslideresumed' );\n\t\t\tcueAutoSlide();\n\t\t}\n\n\t}\n\n\tfunction navigateLeft() {\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().left ) {\n\t\t\t\tslide( indexh + 1 );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || previousFragment() === false ) && availableRoutes().left ) {\n\t\t\tslide( indexh - 1 );\n\t\t}\n\n\t}\n\n\tfunction navigateRight() {\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().right ) {\n\t\t\t\tslide( indexh - 1 );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || nextFragment() === false ) && availableRoutes().right ) {\n\t\t\tslide( indexh + 1 );\n\t\t}\n\n\t}\n\n\tfunction navigateUp() {\n\n\t\t// Prioritize hiding fragments\n\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().up ) {\n\t\t\tslide( indexh, indexv - 1 );\n\t\t}\n\n\t}\n\n\tfunction navigateDown() {\n\n\t\t// Prioritize revealing fragments\n\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().down ) {\n\t\t\tslide( indexh, indexv + 1 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Navigates backwards, prioritized in the following order:\n\t * 1) Previous fragment\n\t * 2) Previous vertical slide\n\t * 3) Previous horizontal slide\n\t */\n\tfunction navigatePrev() {\n\n\t\t// Prioritize revealing fragments\n\t\tif( previousFragment() === false ) {\n\t\t\tif( availableRoutes().up ) {\n\t\t\t\tnavigateUp();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Fetch the previous horizontal slide, if there is one\n\t\t\t\tvar previousSlide;\n\n\t\t\t\tif( config.rtl ) {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.future' ) ).pop();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.past' ) ).pop();\n\t\t\t\t}\n\n\t\t\t\tif( previousSlide ) {\n\t\t\t\t\tvar v = ( previousSlide.querySelectorAll( 'section' ).length - 1 ) || undefined;\n\t\t\t\t\tvar h = indexh - 1;\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * The reverse of #navigatePrev().\n\t */\n\tfunction navigateNext() {\n\n\t\t// Prioritize revealing fragments\n\t\tif( nextFragment() === false ) {\n\t\t\tif( availableRoutes().down ) {\n\t\t\t\tnavigateDown();\n\t\t\t}\n\t\t\telse if( config.rtl ) {\n\t\t\t\tnavigateLeft();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnavigateRight();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the target element prevents the triggering of\n\t * swipe navigation.\n\t */\n\tfunction isSwipePrevented( target ) {\n\n\t\twhile( target && typeof target.hasAttribute === 'function' ) {\n\t\t\tif( target.hasAttribute( 'data-prevent-swipe' ) ) return true;\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ----------------------------- EVENTS -------------------------------//\n\t// --------------------------------------------------------------------//\n\n\t/**\n\t * Called by all event handlers that are based on user\n\t * input.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onUserInput( event ) {\n\n\t\tif( config.autoSlideStoppable ) {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keypress' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyPress( event ) {\n\n\t\t// Check if the pressed key is question mark\n\t\tif( event.shiftKey && event.charCode === 63 ) {\n\t\t\ttoggleHelp();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keydown' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyDown( event ) {\n\n\t\t// If there's a condition specified and it returns false,\n\t\t// ignore this event\n\t\tif( typeof config.keyboardCondition === 'function' && config.keyboardCondition() === false ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Remember if auto-sliding was paused so we can toggle it\n\t\tvar autoSlideWasPaused = autoSlidePaused;\n\n\t\tonUserInput( event );\n\n\t\t// Check if there's a focused element that could be using\n\t\t// the keyboard\n\t\tvar activeElementIsCE = document.activeElement && document.activeElement.contentEditable !== 'inherit';\n\t\tvar activeElementIsInput = document.activeElement && document.activeElement.tagName && /input|textarea/i.test( document.activeElement.tagName );\n\t\tvar activeElementIsNotes = document.activeElement && document.activeElement.className && /speaker-notes/i.test( document.activeElement.className);\n\n\t\t// Disregard the event if there's a focused element or a\n\t\t// keyboard modifier key is present\n\t\tif( activeElementIsCE || activeElementIsInput || activeElementIsNotes || (event.shiftKey && event.keyCode !== 32) || event.altKey || event.ctrlKey || event.metaKey ) return;\n\n\t\t// While paused only allow resume keyboard events; 'b', 'v', '.'\n\t\tvar resumeKeyCodes = [66,86,190,191];\n\t\tvar key;\n\n\t\t// Custom key bindings for togglePause should be able to resume\n\t\tif( typeof config.keyboard === 'object' ) {\n\t\t\tfor( key in config.keyboard ) {\n\t\t\t\tif( config.keyboard[key] === 'togglePause' ) {\n\t\t\t\t\tresumeKeyCodes.push( parseInt( key, 10 ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( isPaused() && resumeKeyCodes.indexOf( event.keyCode ) === -1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar triggered = false;\n\n\t\t// 1. User defined key bindings\n\t\tif( typeof config.keyboard === 'object' ) {\n\n\t\t\tfor( key in config.keyboard ) {\n\n\t\t\t\t// Check if this binding matches the pressed key\n\t\t\t\tif( parseInt( key, 10 ) === event.keyCode ) {\n\n\t\t\t\t\tvar value = config.keyboard[ key ];\n\n\t\t\t\t\t// Callback function\n\t\t\t\t\tif( typeof value === 'function' ) {\n\t\t\t\t\t\tvalue.apply( null, [ event ] );\n\t\t\t\t\t}\n\t\t\t\t\t// String shortcuts to reveal.js API\n\t\t\t\t\telse if( typeof value === 'string' && typeof Reveal[ value ] === 'function' ) {\n\t\t\t\t\t\tReveal[ value ].call();\n\t\t\t\t\t}\n\n\t\t\t\t\ttriggered = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 2. System defined key bindings\n\t\tif( triggered === false ) {\n\n\t\t\t// Assume true and try to prove false\n\t\t\ttriggered = true;\n\n\t\t\tswitch( event.keyCode ) {\n\t\t\t\t// p, page up\n\t\t\t\tcase 80: case 33: navigatePrev(); break;\n\t\t\t\t// n, page down\n\t\t\t\tcase 78: case 34: navigateNext(); break;\n\t\t\t\t// h, left\n\t\t\t\tcase 72: case 37: navigateLeft(); break;\n\t\t\t\t// l, right\n\t\t\t\tcase 76: case 39: navigateRight(); break;\n\t\t\t\t// k, up\n\t\t\t\tcase 75: case 38: navigateUp(); break;\n\t\t\t\t// j, down\n\t\t\t\tcase 74: case 40: navigateDown(); break;\n\t\t\t\t// home\n\t\t\t\tcase 36: slide( 0 ); break;\n\t\t\t\t// end\n\t\t\t\tcase 35: slide( Number.MAX_VALUE ); break;\n\t\t\t\t// space\n\t\t\t\tcase 32: isOverview() ? deactivateOverview() : event.shiftKey ? navigatePrev() : navigateNext(); break;\n\t\t\t\t// return\n\t\t\t\tcase 13: isOverview() ? deactivateOverview() : triggered = false; break;\n\t\t\t\t// two-spot, semicolon, b, v, period, Logitech presenter tools \"black screen\" button\n\t\t\t\tcase 58: case 59: case 66: case 86: case 190: case 191: togglePause(); break;\n\t\t\t\t// f\n\t\t\t\tcase 70: enterFullscreen(); break;\n\t\t\t\t// a\n\t\t\t\tcase 65: if ( config.autoSlideStoppable ) toggleAutoSlide( autoSlideWasPaused ); break;\n\t\t\t\tdefault:\n\t\t\t\t\ttriggered = false;\n\t\t\t}\n\n\t\t}\n\n\t\t// If the input resulted in a triggered action we should prevent\n\t\t// the browsers default behavior\n\t\tif( triggered ) {\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\t\t// ESC or O key\n\t\telse if ( ( event.keyCode === 27 || event.keyCode === 79 ) && features.transforms3d ) {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoggleOverview();\n\t\t\t}\n\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\n\t\t// If auto-sliding is enabled we need to cue up\n\t\t// another timeout\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Handler for the 'touchstart' event, enables support for\n\t * swipe and pinch gestures.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchStart( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\ttouch.startX = event.touches[0].clientX;\n\t\ttouch.startY = event.touches[0].clientY;\n\t\ttouch.startCount = event.touches.length;\n\n\t\t// If there's two touches we need to memorize the distance\n\t\t// between those two points to detect pinching\n\t\tif( event.touches.length === 2 && config.overview ) {\n\t\t\ttouch.startSpan = distanceBetween( {\n\t\t\t\tx: event.touches[1].clientX,\n\t\t\t\ty: event.touches[1].clientY\n\t\t\t}, {\n\t\t\t\tx: touch.startX,\n\t\t\t\ty: touch.startY\n\t\t\t} );\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the 'touchmove' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchMove( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\t// Each touch should only trigger one action\n\t\tif( !touch.captured ) {\n\t\t\tonUserInput( event );\n\n\t\t\tvar currentX = event.touches[0].clientX;\n\t\t\tvar currentY = event.touches[0].clientY;\n\n\t\t\t// If the touch started with two points and still has\n\t\t\t// two active touches; test for the pinch gesture\n\t\t\tif( event.touches.length === 2 && touch.startCount === 2 && config.overview ) {\n\n\t\t\t\t// The current distance in pixels between the two touch points\n\t\t\t\tvar currentSpan = distanceBetween( {\n\t\t\t\t\tx: event.touches[1].clientX,\n\t\t\t\t\ty: event.touches[1].clientY\n\t\t\t\t}, {\n\t\t\t\t\tx: touch.startX,\n\t\t\t\t\ty: touch.startY\n\t\t\t\t} );\n\n\t\t\t\t// If the span is larger than the desire amount we've got\n\t\t\t\t// ourselves a pinch\n\t\t\t\tif( Math.abs( touch.startSpan - currentSpan ) > touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\n\t\t\t\t\tif( currentSpan < touch.startSpan ) {\n\t\t\t\t\t\tactivateOverview();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeactivateOverview();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t}\n\t\t\t// There was only one touch point, look for a swipe\n\t\t\telse if( event.touches.length === 1 && touch.startCount !== 2 ) {\n\n\t\t\t\tvar deltaX = currentX - touch.startX,\n\t\t\t\t\tdeltaY = currentY - touch.startY;\n\n\t\t\t\tif( deltaX > touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tnavigateLeft();\n\t\t\t\t}\n\t\t\t\telse if( deltaX < -touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tnavigateRight();\n\t\t\t\t}\n\t\t\t\telse if( deltaY > touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tnavigateUp();\n\t\t\t\t}\n\t\t\t\telse if( deltaY < -touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tnavigateDown();\n\t\t\t\t}\n\n\t\t\t\t// If we're embedded, only block touch events if they have\n\t\t\t\t// triggered an action\n\t\t\t\tif( config.embedded ) {\n\t\t\t\t\tif( touch.captured || isVerticalSlide( currentSlide ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Not embedded? Block them all to avoid needless tossing\n\t\t\t\t// around of the viewport in iOS\n\t\t\t\telse {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t// There's a bug with swiping on some Android devices unless\n\t\t// the default action is always prevented\n\t\telse if( UA.match( /android/gi ) ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the 'touchend' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchEnd( event ) {\n\n\t\ttouch.captured = false;\n\n\t}\n\n\t/**\n\t * Convert pointer down to touch start.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerDown( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" ) {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchStart( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer move to touch move.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerMove( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchMove( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer up to touch end.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerUp( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchEnd( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles mouse wheel scrolling, throttled to avoid skipping\n\t * multiple slides.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentMouseScroll( event ) {\n\n\t\tif( Date.now() - lastMouseWheelStep > 600 ) {\n\n\t\t\tlastMouseWheelStep = Date.now();\n\n\t\t\tvar delta = event.detail || -event.wheelDelta;\n\t\t\tif( delta > 0 ) {\n\t\t\t\tnavigateNext();\n\t\t\t}\n\t\t\telse if( delta < 0 ) {\n\t\t\t\tnavigatePrev();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Clicking on the progress bar results in a navigation to the\n\t * closest approximate horizontal slide using this equation:\n\t *\n\t * ( clickX / presentationWidth ) * numberOfSlides\n\t *\n\t * @param {object} event\n\t */\n\tfunction onProgressClicked( event ) {\n\n\t\tonUserInput( event );\n\n\t\tevent.preventDefault();\n\n\t\tvar slidesTotal = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).length;\n\t\tvar slideIndex = Math.floor( ( event.clientX / dom.wrapper.offsetWidth ) * slidesTotal );\n\n\t\tif( config.rtl ) {\n\t\t\tslideIndex = slidesTotal - slideIndex;\n\t\t}\n\n\t\tslide( slideIndex );\n\n\t}\n\n\t/**\n\t * Event handler for navigation control buttons.\n\t */\n\tfunction onNavigateLeftClicked( event ) { event.preventDefault(); onUserInput(); navigateLeft(); }\n\tfunction onNavigateRightClicked( event ) { event.preventDefault(); onUserInput(); navigateRight(); }\n\tfunction onNavigateUpClicked( event ) { event.preventDefault(); onUserInput(); navigateUp(); }\n\tfunction onNavigateDownClicked( event ) { event.preventDefault(); onUserInput(); navigateDown(); }\n\tfunction onNavigatePrevClicked( event ) { event.preventDefault(); onUserInput(); navigatePrev(); }\n\tfunction onNavigateNextClicked( event ) { event.preventDefault(); onUserInput(); navigateNext(); }\n\n\t/**\n\t * Handler for the window level 'hashchange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowHashChange( event ) {\n\n\t\treadURL();\n\n\t}\n\n\t/**\n\t * Handler for the window level 'resize' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowResize( event ) {\n\n\t\tlayout();\n\n\t}\n\n\t/**\n\t * Handle for the window level 'visibilitychange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onPageVisibilityChange( event ) {\n\n\t\tvar isHidden =  document.webkitHidden ||\n\t\t\t\t\t\tdocument.msHidden ||\n\t\t\t\t\t\tdocument.hidden;\n\n\t\t// If, after clicking a link or similar and we're coming back,\n\t\t// focus the document.body to ensure we can use keyboard shortcuts\n\t\tif( isHidden === false && document.activeElement !== document.body ) {\n\t\t\t// Not all elements support .blur() - SVGs among them.\n\t\t\tif( typeof document.activeElement.blur === 'function' ) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\tdocument.body.focus();\n\t\t}\n\n\t}\n\n\t/**\n\t * Invoked when a slide is and we're in the overview.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onOverviewSlideClicked( event ) {\n\n\t\t// TODO There's a bug here where the event listeners are not\n\t\t// removed after deactivating the overview.\n\t\tif( eventsAreBound && isOverview() ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = event.target;\n\n\t\t\twhile( element && !element.nodeName.match( /section/gi ) ) {\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\n\t\t\tif( element && !element.classList.contains( 'disabled' ) ) {\n\n\t\t\t\tdeactivateOverview();\n\n\t\t\t\tif( element.nodeName.match( /section/gi ) ) {\n\t\t\t\t\tvar h = parseInt( element.getAttribute( 'data-index-h' ), 10 ),\n\t\t\t\t\t\tv = parseInt( element.getAttribute( 'data-index-v' ), 10 );\n\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles clicks on links that are set to preview in the\n\t * iframe overlay.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPreviewLinkClicked( event ) {\n\n\t\tif( event.currentTarget && event.currentTarget.hasAttribute( 'href' ) ) {\n\t\t\tvar url = event.currentTarget.getAttribute( 'href' );\n\t\t\tif( url ) {\n\t\t\t\tshowPreview( url );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles click on the auto-sliding controls element.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onAutoSlidePlayerClick( event ) {\n\n\t\t// Replay\n\t\tif( Reveal.isLastSlide() && config.loop === false ) {\n\t\t\tslide( 0, 0 );\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Resume\n\t\telse if( autoSlidePaused ) {\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Pause\n\t\telse {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------ PLAYBACK COMPONENT ------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\t/**\n\t * Constructor for the playback component, which displays\n\t * play/pause/progress controls.\n\t *\n\t * @param {HTMLElement} container The component will append\n\t * itself to this\n\t * @param {function} progressCheck A method which will be\n\t * called frequently to get the current progress on a range\n\t * of 0-1\n\t */\n\tfunction Playback( container, progressCheck ) {\n\n\t\t// Cosmetics\n\t\tthis.diameter = 100;\n\t\tthis.diameter2 = this.diameter/2;\n\t\tthis.thickness = 6;\n\n\t\t// Flags if we are currently playing\n\t\tthis.playing = false;\n\n\t\t// Current progress on a 0-1 range\n\t\tthis.progress = 0;\n\n\t\t// Used to loop the animation smoothly\n\t\tthis.progressOffset = 1;\n\n\t\tthis.container = container;\n\t\tthis.progressCheck = progressCheck;\n\n\t\tthis.canvas = document.createElement( 'canvas' );\n\t\tthis.canvas.className = 'playback';\n\t\tthis.canvas.width = this.diameter;\n\t\tthis.canvas.height = this.diameter;\n\t\tthis.canvas.style.width = this.diameter2 + 'px';\n\t\tthis.canvas.style.height = this.diameter2 + 'px';\n\t\tthis.context = this.canvas.getContext( '2d' );\n\n\t\tthis.container.appendChild( this.canvas );\n\n\t\tthis.render();\n\n\t}\n\n\t/**\n\t * @param value\n\t */\n\tPlayback.prototype.setPlaying = function( value ) {\n\n\t\tvar wasPlaying = this.playing;\n\n\t\tthis.playing = value;\n\n\t\t// Start repainting if we weren't already\n\t\tif( !wasPlaying && this.playing ) {\n\t\t\tthis.animate();\n\t\t}\n\t\telse {\n\t\t\tthis.render();\n\t\t}\n\n\t};\n\n\tPlayback.prototype.animate = function() {\n\n\t\tvar progressBefore = this.progress;\n\n\t\tthis.progress = this.progressCheck();\n\n\t\t// When we loop, offset the progress so that it eases\n\t\t// smoothly rather than immediately resetting\n\t\tif( progressBefore > 0.8 && this.progress < 0.2 ) {\n\t\t\tthis.progressOffset = this.progress;\n\t\t}\n\n\t\tthis.render();\n\n\t\tif( this.playing ) {\n\t\t\tfeatures.requestAnimationFrameMethod.call( window, this.animate.bind( this ) );\n\t\t}\n\n\t};\n\n\t/**\n\t * Renders the current progress and playback state.\n\t */\n\tPlayback.prototype.render = function() {\n\n\t\tvar progress = this.playing ? this.progress : 0,\n\t\t\tradius = ( this.diameter2 ) - this.thickness,\n\t\t\tx = this.diameter2,\n\t\t\ty = this.diameter2,\n\t\t\ticonSize = 28;\n\n\t\t// Ease towards 1\n\t\tthis.progressOffset += ( 1 - this.progressOffset ) * 0.1;\n\n\t\tvar endAngle = ( - Math.PI / 2 ) + ( progress * ( Math.PI * 2 ) );\n\t\tvar startAngle = ( - Math.PI / 2 ) + ( this.progressOffset * ( Math.PI * 2 ) );\n\n\t\tthis.context.save();\n\t\tthis.context.clearRect( 0, 0, this.diameter, this.diameter );\n\n\t\t// Solid background color\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius + 4, 0, Math.PI * 2, false );\n\t\tthis.context.fillStyle = 'rgba( 0, 0, 0, 0.4 )';\n\t\tthis.context.fill();\n\n\t\t// Draw progress track\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius, 0, Math.PI * 2, false );\n\t\tthis.context.lineWidth = this.thickness;\n\t\tthis.context.strokeStyle = '#666';\n\t\tthis.context.stroke();\n\n\t\tif( this.playing ) {\n\t\t\t// Draw progress on top of track\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.arc( x, y, radius, startAngle, endAngle, false );\n\t\t\tthis.context.lineWidth = this.thickness;\n\t\t\tthis.context.strokeStyle = '#fff';\n\t\t\tthis.context.stroke();\n\t\t}\n\n\t\tthis.context.translate( x - ( iconSize / 2 ), y - ( iconSize / 2 ) );\n\n\t\t// Draw play/pause icons\n\t\tif( this.playing ) {\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fillRect( 0, 0, iconSize / 2 - 4, iconSize );\n\t\t\tthis.context.fillRect( iconSize / 2 + 4, 0, iconSize / 2 - 4, iconSize );\n\t\t}\n\t\telse {\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.translate( 4, 0 );\n\t\t\tthis.context.moveTo( 0, 0 );\n\t\t\tthis.context.lineTo( iconSize - 4, iconSize / 2 );\n\t\t\tthis.context.lineTo( 0, iconSize );\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fill();\n\t\t}\n\n\t\tthis.context.restore();\n\n\t};\n\n\tPlayback.prototype.on = function( type, listener ) {\n\t\tthis.canvas.addEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.off = function( type, listener ) {\n\t\tthis.canvas.removeEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.destroy = function() {\n\n\t\tthis.playing = false;\n\n\t\tif( this.canvas.parentNode ) {\n\t\t\tthis.container.removeChild( this.canvas );\n\t\t}\n\n\t};\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------------- API --------------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\tReveal = {\n\t\tVERSION: VERSION,\n\n\t\tinitialize: initialize,\n\t\tconfigure: configure,\n\t\tsync: sync,\n\n\t\t// Navigation methods\n\t\tslide: slide,\n\t\tleft: navigateLeft,\n\t\tright: navigateRight,\n\t\tup: navigateUp,\n\t\tdown: navigateDown,\n\t\tprev: navigatePrev,\n\t\tnext: navigateNext,\n\n\t\t// Fragment methods\n\t\tnavigateFragment: navigateFragment,\n\t\tprevFragment: previousFragment,\n\t\tnextFragment: nextFragment,\n\n\t\t// Deprecated aliases\n\t\tnavigateTo: slide,\n\t\tnavigateLeft: navigateLeft,\n\t\tnavigateRight: navigateRight,\n\t\tnavigateUp: navigateUp,\n\t\tnavigateDown: navigateDown,\n\t\tnavigatePrev: navigatePrev,\n\t\tnavigateNext: navigateNext,\n\n\t\t// Forces an update in slide layout\n\t\tlayout: layout,\n\n\t\t// Randomizes the order of slides\n\t\tshuffle: shuffle,\n\n\t\t// Returns an object with the available routes as booleans (left/right/top/bottom)\n\t\tavailableRoutes: availableRoutes,\n\n\t\t// Returns an object with the available fragments as booleans (prev/next)\n\t\tavailableFragments: availableFragments,\n\n\t\t// Toggles a help overlay with keyboard shortcuts\n\t\ttoggleHelp: toggleHelp,\n\n\t\t// Toggles the overview mode on/off\n\t\ttoggleOverview: toggleOverview,\n\n\t\t// Toggles the \"black screen\" mode on/off\n\t\ttogglePause: togglePause,\n\n\t\t// Toggles the auto slide mode on/off\n\t\ttoggleAutoSlide: toggleAutoSlide,\n\n\t\t// State checks\n\t\tisOverview: isOverview,\n\t\tisPaused: isPaused,\n\t\tisAutoSliding: isAutoSliding,\n\n\t\t// Adds or removes all internal event listeners (such as keyboard)\n\t\taddEventListeners: addEventListeners,\n\t\tremoveEventListeners: removeEventListeners,\n\n\t\t// Facility for persisting and restoring the presentation state\n\t\tgetState: getState,\n\t\tsetState: setState,\n\n\t\t// Presentation progress\n\t\tgetSlidePastCount: getSlidePastCount,\n\n\t\t// Presentation progress on range of 0-1\n\t\tgetProgress: getProgress,\n\n\t\t// Returns the indices of the current, or specified, slide\n\t\tgetIndices: getIndices,\n\n\t\t// Returns an Array of all slides\n\t\tgetSlides: getSlides,\n\n\t\t// Returns the total number of slides\n\t\tgetTotalSlides: getTotalSlides,\n\n\t\t// Returns the slide element at the specified index\n\t\tgetSlide: getSlide,\n\n\t\t// Returns the slide background element at the specified index\n\t\tgetSlideBackground: getSlideBackground,\n\n\t\t// Returns the speaker notes string for a slide, or null\n\t\tgetSlideNotes: getSlideNotes,\n\n\t\t// Returns the previous slide element, may be null\n\t\tgetPreviousSlide: function() {\n\t\t\treturn previousSlide;\n\t\t},\n\n\t\t// Returns the current slide element\n\t\tgetCurrentSlide: function() {\n\t\t\treturn currentSlide;\n\t\t},\n\n\t\t// Returns the current scale of the presentation content\n\t\tgetScale: function() {\n\t\t\treturn scale;\n\t\t},\n\n\t\t// Returns the current configuration object\n\t\tgetConfig: function() {\n\t\t\treturn config;\n\t\t},\n\n\t\t// Helper method, retrieves query string as a key/value hash\n\t\tgetQueryHash: function() {\n\t\t\tvar query = {};\n\n\t\t\tlocation.search.replace( /[A-Z0-9]+?=([\\w\\.%-]*)/gi, function(a) {\n\t\t\t\tquery[ a.split( '=' ).shift() ] = a.split( '=' ).pop();\n\t\t\t} );\n\n\t\t\t// Basic deserialization\n\t\t\tfor( var i in query ) {\n\t\t\t\tvar value = query[ i ];\n\n\t\t\t\tquery[ i ] = deserialize( unescape( value ) );\n\t\t\t}\n\n\t\t\treturn query;\n\t\t},\n\n\t\t// Returns true if we're currently on the first slide\n\t\tisFirstSlide: function() {\n\t\t\treturn ( indexh === 0 && indexv === 0 );\n\t\t},\n\n\t\t// Returns true if we're currently on the last slide\n\t\tisLastSlide: function() {\n\t\t\tif( currentSlide ) {\n\t\t\t\t// Does this slide has next a sibling?\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\n\n\t\t\t\t// If it's vertical, does its parent have a next sibling?\n\t\t\t\tif( isVerticalSlide( currentSlide ) && currentSlide.parentNode.nextElementSibling ) return false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t// Checks if reveal.js has been loaded and is ready for use\n\t\tisReady: function() {\n\t\t\treturn loaded;\n\t\t},\n\n\t\t// Forward event binding to the reveal DOM element\n\t\taddEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\t( dom.wrapper || document.querySelector( '.reveal' ) ).addEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\t\tremoveEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\t( dom.wrapper || document.querySelector( '.reveal' ) ).removeEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\n\t\t// Programatically triggers a keyboard event\n\t\ttriggerKey: function( keyCode ) {\n\t\t\tonDocumentKeyDown( { keyCode: keyCode } );\n\t\t},\n\n\t\t// Registers a new shortcut to include in the help overlay\n\t\tregisterKeyboardShortcut: function( key, value ) {\n\t\t\tkeyboardShortcuts[key] = value;\n\t\t}\n\t};\n\n\treturn Reveal;\n\n}));\n"],"sourceRoot":"../../../.."}